(function(e){function t(t){for(var r,s,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},n={app:0},o=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/string-art-generator/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"13aa":function(e,t,a){"use strict";a("f42f")},"13d5":function(e,t,a){"use strict";a("fa8f")},"1c35":function(e,t,a){"use strict";a("4e56")},"32db":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a4d3"),core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("e01a"),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d28b"),core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("cb29"),core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7db0"),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("3ca3"),core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_8__),_helpers_CanvasHelper_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("7ae5");__webpack_exports__["a"]={name:"board",props:{zoom:{type:Number},layerSelected:{}},data:function(){return{refreshRequired:!0,refreshOverlayRequired:!0,canvas:null,drawing:!1,nailHover:null,nailSelected:null,nails:[]}},computed:{nailsBetweenLayers:function(){return-1===this.board.nailsBetweenLayers?this.project.getAutoNailsBetweenLayers():this.board.nailsBetweenLayers},resolution:function(){return this.board.resolution/2.54},centerX:function(){return this.board.width*this.resolution/2},centerY:function(){return this.board.width*this.resolution/2}},mounted:function(){this.canvas=new _helpers_CanvasHelper_js__WEBPACK_IMPORTED_MODULE_9__["a"]("board-canvas"),this.overlay=new _helpers_CanvasHelper_js__WEBPACK_IMPORTED_MODULE_9__["a"]("overlay-canvas"),this.redraw()},created:function(){this.updateLoop()},methods:{onMouseMove:function(e){this.nailHover=this.findNailByMouseEvt(e),this.refreshOverlayRequired=!0},onClick:function(e){var t=this.nailSelected;this.nailSelected=this.findNailByMouseEvt(e),this.refreshOverlayRequired=!0,this.$emit("nail-selected",this.nailSelected,t)},findNailByMouseEvt:function(e){var t=this,a=(this.board.nails.radius+2)*this.resolution/20;return this.nails.find((function(r){return r.x-a<e.offsetX/t.zoom&&e.offsetX/t.zoom<r.x+a&&r.y-a<e.offsetY/t.zoom&&e.offsetY/t.zoom<r.y+a}))},updateLoop:function(){var e=this;window.requestAnimationFrame((function(){e.refreshRequired&&e.redraw(),e.refreshOverlayRequired&&e.drawOverlay(),e.updateLoop()}))},redraw:function(){if(this.drawing)return!1;this.drawing=!0,this.canvas.clear(this.board.backgroundColor),this.generateNails(),this.drawGrid(),this.settings.printMode||this.drawLayers(),this.drawNails(),this.drawOverlay(),this.refreshRequired=!1,this.drawing=!1},drawOverlay:function(){if(this.overlay.clear(),this.overlay.context.textAlign="center",this.overlay.context.textBaseline="middle",this.overlay.context.font="15pt Arial",this.nailHover&&(this.overlay.context.fillStyle="#c97413",this.overlay.context.strokeStyle="#c97413",this.overlay.context.beginPath(),this.overlay.context.arc(this.nailHover.x,this.nailHover.y,(this.board.nails.radius+2)*this.resolution/20,0,2*Math.PI),this.overlay.context.fill(),this.overlay.context.fillText(this.nailHover.index+1,this.nailHover.textX+5,this.nailHover.textY+5)),this.recordLayerPattern&&this.layerSelected){this.overlay.context.fillStyle="red",this.overlay.context.strokeStyle="red";var e=0,t=!0,a=!1,r=void 0;try{for(var n,o=this.layerSelected.patternSteps[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value,i=this.getNail(s.nail);this.overlay.context.beginPath(),this.overlay.context.arc(i.x,i.y,(this.board.nails.radius+2)*this.resolution/20,0,2*Math.PI),this.overlay.context.fill(),this.overlay.context.fillText(e+1,i.textX+5,i.textY+5),e++}}catch(l){a=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}}else this.nailSelected&&(this.overlay.context.fillStyle="magenta",this.overlay.context.strokeStyle="magenta",this.overlay.context.beginPath(),this.overlay.context.arc(this.nailSelected.x,this.nailSelected.y,(this.board.nails.radius+2)*this.resolution/20,0,2*Math.PI),this.overlay.context.fill(),this.overlay.context.fillText(this.nailSelected.index+1,this.nailSelected.textX+5,this.nailSelected.textY+5));this.refreshOverlayRequired=!1},generateNails:function(){this.nails=[];for(var e=0;e<this.board.nails.quantity;e++){var t=this.board.startingAngle+90+(this.board.clockwise?-1:1)*e*360/this.board.nails.quantity;t*=Math.PI/180,this.nails.push({index:this.nails.length,x:this.centerX+this.board.radius*this.resolution*Math.cos(t),y:this.centerY+this.board.radius*this.resolution*Math.sin(t),cmX:this.board.radius*Math.cos(t),cmY:this.board.radius*Math.sin(t),textX:this.centerX+1.05*this.board.radius*this.resolution*Math.cos(t),textY:this.centerY+1.05*this.board.radius*this.resolution*Math.sin(t)})}},drawGrid:function(){this.canvas.context.strokeStyle="#bbb",this.canvas.context.lineWidth=1,this.$store.state.settings.middleLines&&(this.canvas.context.beginPath(),this.canvas.context.moveTo(0,this.centerY),this.canvas.context.lineTo(this.board.width*this.resolution,this.centerY),this.canvas.context.stroke(),this.canvas.context.beginPath(),this.canvas.context.moveTo(this.centerX,0),this.canvas.context.lineTo(this.centerX,this.board.height*this.resolution),this.canvas.context.stroke()),this.$store.state.settings.diagonalLines&&(this.canvas.context.beginPath(),this.canvas.context.moveTo(0,0),this.canvas.context.lineTo(this.board.width*this.resolution,this.board.height*this.resolution),this.canvas.context.stroke(),this.canvas.context.beginPath(),this.canvas.context.moveTo(0,this.board.height*this.resolution),this.canvas.context.lineTo(this.board.width*this.resolution,0),this.canvas.context.stroke()),this.settings.printMode&&(this.canvas.context.strokeStyle="#000",this.canvas.context.beginPath(),this.canvas.context.moveTo(this.centerX-10,this.centerY),this.canvas.context.lineTo(this.centerX+10,this.centerY),this.canvas.context.moveTo(this.centerX,this.centerY-10),this.canvas.context.lineTo(this.centerX,this.centerY+10),this.canvas.context.stroke())},drawNails:function(){this.canvas.context.textAlign="center",this.canvas.context.textBaseline="middle",this.canvas.context.fillStyle=this.board.nails.color,this.canvas.context.strokeStyle=this.board.nails.color,this.canvas.context.lineWidth=1,this.settings.printMode&&(this.canvas.context.beginPath(),this.canvas.context.arc(this.centerX,this.centerY,this.board.radius*this.resolution,0,2*Math.PI),this.canvas.context.stroke());var e=0,t=!0,a=!1,r=void 0;try{for(var n,o=this.nails[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value;this.canvas.context.beginPath(),this.settings.printMode?(this.canvas.context.moveTo(this.centerX+.98*(s.x-this.centerX),this.centerY+.98*(s.y-this.centerY)),this.canvas.context.lineTo(s.x,s.y),this.canvas.context.stroke()):(this.canvas.context.arc(s.x,s.y,this.board.nails.radius*this.resolution/20,0,2*Math.PI),this.canvas.context.fill()),this.settings.nailNumbers&&this.canvas.context.fillText(e+1,s.textX+5,s.textY+5),e+=1}}catch(i){a=!0,r=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}},drawLayers:function(){var e=0,t=!0,a=!1,r=void 0;try{for(var n,o=this.layers[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value;this.drawLayer(e,s),e++}}catch(i){a=!0,r=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}},drawLayer:function drawLayer(index,layer){if(!layer.visible||this.recordLayerPattern)return!1;this.canvas.context.strokeStyle=layer.color,this.canvas.context.lineWidth=this.board.strings.width,this.canvas.context.textAlign="center",this.canvas.context.textBaseline="middle",layer.length=0;var startNail=Math.round(-index*this.nailsBetweenLayers);"auto"===layer.startingNail||isNaN(parseInt(layer.startingNail))||(startNail=parseInt(layer.startingNail));var lastNail=this.getNail(startNail);this.canvas.context.beginPath();for(var i=0;i<this.nails.length/2;i++)if("default"===layer.pattern){var nail=this.getNail(startNail+i);this.canvas.context.moveTo(nail.x,nail.y);var nail2=this.getNail(startNail+2*i+this.nails.length/2);this.canvas.context.lineTo(nail2.x,nail2.y),layer.length+=2*Math.sqrt(Math.pow(nail2.cmX-nail.cmX,2)+Math.pow(nail2.cmY-nail.cmY,2))}else{var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=layer.patternSteps[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var step=_step4.value;this.canvas.context.moveTo(lastNail.x,lastNail.y);try{var _nail=null,delta=parseInt(step.delta);_nail=delta?this.getNail(lastNail.index+step.delta):this.getNail(startNail+eval(step.delta)),_nail&&(this.canvas.context.lineTo(_nail.x,_nail.y),layer.length+=2*Math.sqrt(Math.pow(_nail.cmX-lastNail.cmX,2)+Math.pow(_nail.cmY-lastNail.cmY,2)),lastNail=_nail)}catch(_unused){layer.length=0}}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}layer.length=Math.round(layer.length/100),this.canvas.context.stroke()},modulo:function(e,t){var a=Number(e)%Number(t);return a<0?t+a:a},getNail:function(e){return this.nails[this.modulo(Math.round(e),this.nails.length)]},refreshScreenAndOverlay:function(){this.refreshRequired=!0,this.refreshOverlayRequired=!0}},watch:{board:{deep:!0,handler:function(){this.refreshRequired=!0}},settings:{deep:!0,handler:function(){this.refreshRequired=!0}},layers:{deep:!0,handler:function(){this.refreshRequired=!0}}}}},3602:function(e,t,a){},"369e":function(e,t,a){"use strict";a("efe0")},"3e2c":function(e,t,a){},"4e56":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("home")],1)},o=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"home"}},[a("b-navbar",{staticClass:"main-menu",attrs:{variant:"dark",fixed:"top"}},[e.isMobile?a("b-btn",{attrs:{variant:"transparent"},on:{click:function(t){e.$store.state.mobilePropertiesExtended=!e.$store.state.mobilePropertiesExtended}}},[a("i",{staticClass:"far fa-bars"})]):e._e(),e.project?[a("b-dropdown",{attrs:{text:"Menu","no-caret":""}},[a("b-dropdown-item",{on:{click:e.newProject}},[e._v("Nouveau")]),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:e.saveOrSaveAs}},[e._v("Enregistrer")]),a("b-dropdown-item",{on:{click:e.saveAs}},[e._v("Enregistrer Sous")]),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:e.print}},[a("i",{staticClass:"far fa-print"}),e._v(" Imprimer")]),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:e.closeProject}},[e._v("Fermer le projet")])],1),e.isMobile||e.isMobileLandscape?e._e():a("b-dropdown",{attrs:{text:"Affichage","no-caret":""}},[a("b-dropdown-item",{on:{click:function(t){e.$store.state.settings.showCenter=!e.$store.state.settings.showCenter}}},[a("b-checkbox",{attrs:{checked:e.$store.state.settings.showCenter}},[e._v("Afficher le centre")])],1),a("b-dropdown-item",{on:{click:function(t){e.$store.state.settings.middleLines=!e.$store.state.settings.middleLines}}},[a("b-checkbox",{attrs:{checked:e.$store.state.settings.middleLines}},[e._v("Afficher repère central")])],1),a("b-dropdown-item",{on:{click:function(t){e.$store.state.settings.diagonalLines=!e.$store.state.settings.diagonalLines}}},[a("b-checkbox",{attrs:{checked:e.$store.state.settings.diagonalLines}},[e._v("Afficher lignes diagonale")])],1),a("b-dropdown-item",{on:{click:function(t){e.$store.state.settings.nailNumbers=!e.$store.state.settings.nailNumbers}}},[a("b-checkbox",{attrs:{checked:e.$store.state.settings.nailNumbers}},[e._v("Afficher le numéro des clous")])],1),a("b-dropdown-item",{on:{click:function(t){e.$store.state.settings.printMode=!e.$store.state.settings.printMode}}},[a("b-checkbox",{attrs:{checked:e.$store.state.settings.printMode}},[e._v("Mode d'impression")])],1)],1),a("b-btn",{attrs:{variant:"transparent"},on:{click:function(t){return t.stopPropagation(),e.saveOrSaveAs.apply(null,arguments)}}},[a("i",{staticClass:"far fa-save"})]),a("b-btn",{attrs:{variant:"transparent",disabled:""},on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"far fa-undo"})]),a("b-btn",{attrs:{variant:"transparent",disabled:""},on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"far fa-redo"})]),a("div",{staticClass:"separator"}),a("b-btn",{attrs:{variant:"transparent"},on:{click:function(t){return t.stopPropagation(),e.setZoom(-.1)}}},[a("i",{staticClass:"far fa-search-minus"})]),a("div",{staticClass:"zoom"},[e._v(e._s(Math.round(100*e.zoom))+"%")]),a("b-btn",{attrs:{variant:"transparent"},on:{click:function(t){return t.stopPropagation(),e.setZoom(.1)}}},[a("i",{staticClass:"far fa-search-plus"})]),e.isMobile?e._e():[a("div",{staticClass:"separator"}),e.project?a("b-input",{staticClass:"project-name",model:{value:e.project.name,callback:function(t){e.$set(e.project,"name",t)},expression:"project.name"}}):e._e()]]:e._e(),e.isMobile?e._e():[a("b-navbar-brand",{staticClass:"ml-auto"},[e._v("String Art Generator")])]],2),e.project?[a("properties-panel",{model:{value:e.layerSelected,callback:function(t){e.layerSelected=t},expression:"layerSelected"}}),a("main-page",{on:{wheel:e.onWheelChanged}},[a("board",{ref:"board",attrs:{zoom:e.zoom,"layer-selected":e.layerSelected},on:{"nail-selected":e.onNailSelected}})],1)]:[a("div",{staticClass:"welcome-screen"},[a("b-container",[e.isMobile?e._e():[a("h5",{},[e._v("String Art Generator v0.1")]),a("hr")],a("div",{staticClass:"buttons"},[a("h4",{staticClass:"text-center"},[e._v("Bienvenue Arianne")]),a("b-btn",{attrs:{block:"",variant:"primary"},on:{click:e.newProject}},[e._v("Nouveau projet")])],1),a("div",{staticClass:"previous-projects"},[a("h4",{staticClass:"text-center"},[e._v("Projets récents")]),e.previousProjects&&e.previousProjects.length>0?a("div",{staticClass:"project-list"},e._l(e.previousProjects,(function(t){return a("div",{key:t.id,staticClass:"project",on:{click:function(a){return e.openProject(t)}}},[a("div",{staticClass:"date"},[e._v(e._s(e._f("date")(t.date_creation)))]),a("div",{staticClass:"name"},[e._v(e._s(t.name))])])})),0):[a("p",{staticClass:"empty text-center"},[e._v("Pas encore de projets récents...")])]],2)],2)],1)]],2)},i=[],l=(a("b0c0"),a("96cf"),a("1da1")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"board"},[a("div",{staticClass:"board-container",style:{zoom:e.zoom},attrs:{width:e.board.width*e.resolution+40,height:e.board.height*e.resolution+60}},[a("canvas",{class:{"record-mode":e.recordLayerPattern},attrs:{id:"board-canvas",width:e.board.width*e.resolution,height:e.board.height*e.resolution},on:{mousemove:e.onMouseMove,click:e.onClick}}),a("canvas",{attrs:{id:"overlay-canvas",width:e.board.width*e.resolution,height:e.board.height*e.resolution}})])])},u=[],d=a("32db"),p=d["a"],b=(a("13aa"),a("2877")),_=Object(b["a"])(p,c,u,!1,null,"21e6de58",null),h=_.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"properties-panel",class:{extended:e.$store.state.mobilePropertiesExtended}},[e.menuExtended?a("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"primary"},on:{click:function(t){e.$store.state.mobilePropertiesExtended=!1}}},[a("i",{staticClass:"far fa-arrow-right"})]):e._e(),!e.isMobile||e.$store.state.mobilePropertiesExtended?a("div",{staticClass:"properties-group",attrs:{id:"properties"}},[e.layerSelected?e._e():[a("div",{staticClass:"tabs"},[a("b-btn",{class:{active:"board"===e.tabSelected},attrs:{variant:"tab"},on:{click:function(t){e.tabSelected="board"}}},[e._v("Plateau")]),a("b-btn",{class:{active:"shape"===e.tabSelected},attrs:{variant:"tab"},on:{click:function(t){e.tabSelected="shape"}}},[e._v("Forme")]),a("b-btn",{class:{active:"nails"===e.tabSelected},attrs:{variant:"tab"},on:{click:function(t){e.tabSelected="nails"}}},[e._v("Clous")])],1),"board"===e.tabSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Fond")]),a("b-input",{attrs:{type:"text",maxlength:"7"},model:{value:e.board.backgroundColor,callback:function(t){e.$set(e.board,"backgroundColor",t)},expression:"board.backgroundColor"}}),a("b-input",{staticClass:"ml-1",attrs:{type:"color"},model:{value:e.board.backgroundColor,callback:function(t){e.$set(e.board,"backgroundColor",t)},expression:"board.backgroundColor"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Taille (cm)")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:e.board.width,callback:function(t){e.$set(e.board,"width",e._n(t))},expression:"board.width"}}),a("b-input-group-text",{staticClass:"mx-2"},[e._v("x")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:e.board.height,callback:function(t){e.$set(e.board,"height",e._n(t))},expression:"board.height"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Taille fils")]),a("b-input",{attrs:{type:"number",min:"0.1",max:"5",step:"0.1"},model:{value:e.board.strings.width,callback:function(t){e.$set(e.board.strings,"width",e._n(t))},expression:"board.strings.width"}}),a("b-input-group-text",{staticClass:"pl-2"},[e._v("px")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Qualité")]),a("b-select",{model:{value:e.board.resolution,callback:function(t){e.$set(e.board,"resolution",e._n(t))},expression:"board.resolution"}},e._l(300,(function(t){return a("option",{key:"resolution-"+t,domProps:{value:t+1}},[e._v(e._s(t+1))])})),0),a("b-input-group-text",{staticClass:"pl-2"},[e._v("dpi")])],1)],1)],1):e._e(),"shape"===e.tabSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Forme de base")]),a("b-select",{model:{value:e.board.shape,callback:function(t){e.$set(e.board,"shape",t)},expression:"board.shape"}},[a("option",{attrs:{value:"circle"}},[e._v("Cercle")])])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Rayon")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:e.board.radius,callback:function(t){e.$set(e.board,"radius",e._n(t))},expression:"board.radius"}}),a("b-input-group-text",{staticClass:"pl-2"},[e._v("cm")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Espacement")]),a("b-select",{model:{value:e.board.nailsBetweenLayers,callback:function(t){e.$set(e.board,"nailsBetweenLayers",e._n(t))},expression:"board.nailsBetweenLayers"}},[a("option",{attrs:{value:"-1"}},[e._v("Automatique")]),e._l(150,(function(t){return a("option",{key:"resolution-"+t,domProps:{value:t+1}},[e._v(e._s(t+1)+" clous")])}))],2)],1)],1),-1===e.board.nailsBetweenLayers?a("div",{staticClass:"f-10 f-500 mb-2 text-right text-light"},[e._v(" Calculé "+e._s(e.roundTo1(e.project.getAutoNailsBetweenLayers()))+" clous ")]):e._e(),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Angle départ")]),a("b-input",{attrs:{type:"number",min:"0",max:"360",step:"15"},model:{value:e.board.startingAngle,callback:function(t){e.$set(e.board,"startingAngle",e._n(t))},expression:"board.startingAngle"}}),a("b-input-group-text",{staticClass:"pl-2"},[e._v("°")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Sens horaire")]),a("b-checkbox",{model:{value:e.board.clockwise,callback:function(t){e.$set(e.board,"clockwise",t)},expression:"board.clockwise"}})],1)],1)],1):e._e(),"nails"===e.tabSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Nombre")]),a("b-input",{attrs:{type:"number",min:"1",max:"999",step:"10"},model:{value:e.board.nails.quantity,callback:function(t){e.$set(e.board.nails,"quantity",e._n(t))},expression:"board.nails.quantity"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Diamètre")]),a("b-input",{attrs:{type:"number",min:"0.5",max:"25",step:"0.25"},model:{value:e.board.nails.radius,callback:function(t){e.$set(e.board.nails,"radius",e._n(t))},expression:"board.nails.radius"}}),a("b-input-group-text",{staticClass:"pl-2"},[e._v("mm")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Couleur")]),a("b-input",{attrs:{type:"text",maxlength:"7"},model:{value:e.board.nails.color,callback:function(t){e.$set(e.board.nails,"color",t)},expression:"board.nails.color"}}),a("b-input",{staticClass:"ml-1",attrs:{type:"color"},model:{value:e.board.nails.color,callback:function(t){e.$set(e.board.nails,"color",t)},expression:"board.nails.color"}})],1)],1)],1):e._e()],e.layerSelected?a("div",{staticClass:"content"},[a("div",{staticClass:"tabs"},[a("b-btn",{class:{active:"string"===e.stringTab},attrs:{variant:"tab"},on:{click:function(t){e.stringTab="string"}}},[e._v("Fil")]),a("b-btn",{class:{active:"pattern"===e.stringTab},attrs:{variant:"tab"},on:{click:function(t){e.stringTab="pattern"}}},[e._v("Motif")])],1),"string"===e.stringTab?[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Nom")]),a("b-input",{attrs:{type:"text"},model:{value:e.layerSelected.name,callback:function(t){e.$set(e.layerSelected,"name",t)},expression:"layerSelected.name"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Couleur")]),a("b-input",{attrs:{type:"text",maxlength:"7"},model:{value:e.layerSelected.color,callback:function(t){e.$set(e.layerSelected,"color",t)},expression:"layerSelected.color"}}),a("b-input",{staticClass:"ml-1",attrs:{type:"color"},model:{value:e.layerSelected.color,callback:function(t){e.$set(e.layerSelected,"color",t)},expression:"layerSelected.color"}})],1),a("b-input-group",{staticClass:"mt-1"},[a("b-btn",{staticClass:"mr-1",attrs:{variant:"default"},on:{click:function(t){return e.$refs.colorPalette.show()}}},[a("i",{staticClass:"far fa-palette"})]),a("b-input",{attrs:{type:"number",min:"0",max:"360"},on:{change:e.updateLayerColorHSL},model:{value:e.layerColorHSL[0],callback:function(t){e.$set(e.layerColorHSL,0,e._n(t))},expression:"layerColorHSL[0]"}}),a("b-input-group-text",{staticClass:"px-1"},[e._v("°")]),a("b-input",{attrs:{type:"number",min:"0",max:"100"},on:{change:e.updateLayerColorHSL},model:{value:e.layerColorHSL[1],callback:function(t){e.$set(e.layerColorHSL,1,e._n(t))},expression:"layerColorHSL[1]"}}),a("b-input-group-text",{staticClass:"px-1"},[e._v("%")]),a("b-input",{attrs:{type:"number",min:"0",max:"100"},on:{change:e.updateLayerColorHSL},model:{value:e.layerColorHSL[2],callback:function(t){e.$set(e.layerColorHSL,2,e._n(t))},expression:"layerColorHSL[2]"}}),a("b-input-group-text",{staticClass:"pl-1"},[e._v("%")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Longueur")]),a("b-input",{attrs:{readonly:"",value:e._f("number")(e.layerSelected.length)}}),a("b-input-group-text",{staticClass:"pl-2"},[e._v("m")])],1)],1)]:e._e(),"pattern"===e.stringTab?[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Type")]),a("b-select",{model:{value:e.layerSelected.pattern,callback:function(t){e.$set(e.layerSelected,"pattern",t)},expression:"layerSelected.pattern"}},[a("option",{attrs:{value:"default"}},[e._v("Défaut")]),a("option",{attrs:{value:"custom"}},[e._v("Personnalisé")])])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("1er clou")]),a("b-select",{model:{value:e.layerSelected.startingNail,callback:function(t){e.$set(e.layerSelected,"startingNail",e._n(t))},expression:"layerSelected.startingNail"}},[a("option",{attrs:{value:"auto"}},[e._v("Automatique")]),a("option",{attrs:{value:"0"}},[e._v("Clou 1")]),e._l(150,(function(t){return a("option",{key:"start-"+t,domProps:{value:t}},[e._v("Clou "+e._s(t+1))])}))],2)],1)],1),"custom"===e.layerSelected.pattern?[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[e._v("Actions")]),a("b-btn",{class:e.recordLayerPattern?"":"text-danger",attrs:{size:"sm",variant:e.recordLayerPattern?"danger":"default",title:"Enregistrer un motif"},on:{click:e.startPatternRecord}},[e._v("⬤ "),e.recordLayerPattern?a("span",[e._v("Appliquer")]):e._e()]),e.recordLayerPattern?e._e():[a("b-btn",{staticClass:"ml-2",attrs:{size:"sm",variant:"default",title:"Ajouter une étape"},on:{click:function(t){return e.addPatternStep()}}},[a("i",{staticClass:"far fa-plus-square"})]),a("b-btn",{staticClass:"ml-auto",attrs:{size:"sm",variant:"default",title:"Appliquer ce motif à tous les calques"}},[a("i",{staticClass:"far fa-share-square"})])]],2)],1),a("hr"),a("h4",[e._v("Étapes")]),e._l(e.layerSelected.patternSteps,(function(t,r){return a("b-form-group",{key:"step-"+r,staticClass:"property"},[e.recordLayerPattern?a("b-input-group",[a("b-input-group-text",[e._v("Clou "+e._s(r+1))]),a("b-input",{model:{value:t.nail,callback:function(a){e.$set(t,"nail",a)},expression:"step.nail"}}),a("b-btn",{staticClass:"ml-2",attrs:{size:"sm",variant:"default",title:"Enlever cette étape"},on:{click:function(t){return e.removePatternStep(r)}}},[a("i",{staticClass:"far fa-trash"})])],1):a("b-input-group",[a("b-input-group-text",[e._v("Étape "+e._s(r+1))]),a("b-input",{model:{value:t.delta,callback:function(a){e.$set(t,"delta",a)},expression:"step.delta"}}),a("b-btn",{staticClass:"ml-2",attrs:{size:"sm",variant:"default",title:"Enlever cette étape"},on:{click:function(t){return e.removePatternStep(r)}}},[a("i",{staticClass:"far fa-trash"})])],1)],1)}))]:e._e()]:e._e()],2):e._e()],2):e._e(),a("div",{staticClass:"properties-group",attrs:{id:"layers"}},[a("h4",[e._v("Calques")]),a("div",{staticClass:"content"},[a("div",{staticClass:"layer",class:{active:!e.layerSelected},on:{click:function(t){e.layerSelected=null}}},[e._m(0),a("div",{staticClass:"name"},[e._v("Plateau")])]),a("draggable",{attrs:{handle:e.isMobile||e.isMobileLandscape?".handle":null,"ghost-class":"list-item-ghost","drag-class":"list-item-drag",animation:"150"},model:{value:e.layers,callback:function(t){e.layers=t},expression:"layers"}},e._l(e.layers,(function(t){return a("div",{key:t.id,staticClass:"layer",class:{active:e.layerSelected===t},on:{click:function(a){e.layerSelected=t}}},[e.isMobile||e.isMobileLandscape?a("div",{staticClass:"handle"},[a("i",{staticClass:"far fa-bars mr-2"})]):e._e(),a("div",{staticClass:"visibility",on:{click:function(e){e.stopPropagation(),t.visible=!t.visible}}},[t.visible?a("i",{staticClass:"far fa-eye fa-fw"}):a("i",{staticClass:"far fa-eye-slash fa-fw"})]),a("div",{staticClass:"name"},[e._v(" "+e._s(t.name)+" ")]),a("div",{staticClass:"color"},[a("i",{style:{color:t.color}},[e._v("⬤")])])])})),0)],1),a("div",{staticClass:"actions"},[a("b-btn",{on:{click:e.addLayer}},[a("i",{staticClass:"far fa-layer-plus"})]),a("b-btn",{staticClass:"ml-auto",attrs:{disabled:null===e.layerSelected},on:{click:e.removeLayer}},[a("i",{staticClass:"far fa-trash"})])],1)]),e.layerSelected?a("color-palette",{ref:"colorPalette",model:{value:e.layerSelected.color,callback:function(t){e.$set(e.layerSelected,"color",t)},expression:"layerSelected.color"}}):e._e()],1)},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"visibility"},[a("i",{staticClass:"far fa-game-board-alt"})])}],v=(a("a434"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{"modal-class":"color-palette",title:"Color Palette","hide-footer":"","hide-backdrop":"",size:e.isListView?"lg":"md"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("b-row",[a("b-col",[a("b-tabs",{attrs:{"content-class":"view-"+e.view}},[a("b-tab",{attrs:{title:"Gutermann"}},[a("div",{staticClass:"palette rectangles"},e._l(e.PaletteHelper.gutermannPalette,(function(t,r){return a("div",{key:"column"+r,staticClass:"column"},e._l(t,(function(t){return a("div",{key:t,staticClass:"color",class:{active:t.color===e.value},style:{backgroundColor:t.color},attrs:{title:t.name},on:{click:function(a){return e.$emit("input",t.color)}}},[e.isListView?a("span",{staticClass:"name"},[e._v(e._s(t.name))]):e._e()])})),0)})),0)]),a("b-tab",{attrs:{title:"Standard"}},[a("div",{staticClass:"palette",staticStyle:{width:"215px"}},e._l(e.PaletteHelper.basicPalette,(function(t){return a("div",{key:t,staticClass:"color",class:{active:t===e.value},style:{backgroundColor:t},on:{click:function(a){return e.$emit("input",t)}}})})),0)])],1)],1),a("b-col",{staticStyle:{"max-width":"250px"},attrs:{cols:"12",md:"4",lg:"3"}},[a("b-btn",{attrs:{block:"",variant:"primary"},on:{click:function(t){e.visible=!1}}},[e._v("Appliquer")]),a("b-btn",{staticClass:"mt-2",attrs:{block:"",variant:"default"},on:{click:e.cancel}},[e._v("Annuler")]),a("b-button-group",{staticClass:"mt-2 mb-5"},[a("b-btn",{class:{active:"default"===e.view},attrs:{variant:"default"},on:{click:function(t){e.view="default"}}},[a("i",{staticClass:"far fa-th"})]),a("b-btn",{class:{active:"large"===e.view},attrs:{variant:"default"},on:{click:function(t){e.view="large"}}},[a("i",{staticClass:"far fa-th-large"})]),a("b-btn",{class:{active:"list"===e.view},attrs:{variant:"default"},on:{click:function(t){e.view="list"}}},[a("i",{staticClass:"far fa-list-ul"})]),a("b-btn",{class:{active:"list-square"===e.view},attrs:{variant:"default"},on:{click:function(t){e.view="list-square"}}},[a("i",{staticClass:"far fa-list"})])],1),a("b-input",{staticStyle:{position:"absolute",bottom:"0",left:"15px",width:"90px"},attrs:{type:"text",maxlength:"7"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),a("b-input",{staticStyle:{position:"absolute",bottom:"0",right:"15px",width:"70px"},attrs:{type:"text",maxlength:"7"},model:{value:e.gutermannCode,callback:function(t){e.gutermannCode=t},expression:"gutermannCode"}})],1)],1)],1)}),y=[],g=(a("a4d3"),a("e01a"),a("d28b"),a("7db0"),a("d3b7"),a("3ca3"),a("ddb0"),a("d4ec")),x=a("bee2"),C=a("ade3"),w=function(){function e(){Object(g["a"])(this,e)}return Object(x["a"])(e,null,[{key:"getDefaultColor",value:function(e){return this.defaultPalette[e%this.defaultPalette.length]}},{key:"findColor",value:function(e){if(!e)return null;var t=!0,a=!1,r=void 0;try{for(var n,o=this.gutermannPalette[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value,i=s.find((function(t){return t.color===e}));if(i)return i}}catch(l){a=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}return null}},{key:"getColorByName",value:function(e){if(!e)return null;var t=!0,a=!1,r=void 0;try{for(var n,o=this.gutermannPalette[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value,i=s.find((function(t){return t.name===e}));if(i)return i}}catch(l){a=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}return null}}]),e}();Object(C["a"])(w,"defaultPalette",["#051f24","#1d758a","#036074","#5b93a3","#3587a3","#3aa1aa","#93cccc","#8eb1af","#88babf"]),Object(C["a"])(w,"basicPalette",["#ffffff","#f3f3f3","#efefef","#d9d9d9","#cccccc","#b7b7b7","#999999","#666666","#434343","#000000","#f4cccc","#e6b8af","#fce5cd","#fff2cc","#d9ead3","#c5dee2","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc","#ea9999","#dd7e6b","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#a4c2f4","#9fc5e8","#b4a7d6","#d5a6bd","#e06666","#cc4125","#f6b26b","#ffd966","#93c47d","#76a5af","#6d9eeb","#6fa8dc","#8e7cc3","#c27ba0","#cc0000","#a61c00","#e69138","#f1c232","#6aa84f","#45818e","#3c78d8","#3d85c6","#674ea7","#a64d79","#990000","#85200c","#b45f06","#bf9000","#38761d","#134f5c","#1155cc","#0b5394","#351c75","#741b47","#660000","#5b0f00","#783f04","#7f6000","#274e13","#0c343d","#1c4587","#073763","#20124d","#4c1130","#ff0000","#980000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff"]),Object(C["a"])(w,"gutermannPalette",[[{name:"020",color:"#eeeced"},{name:"202",color:"#dae0e3"},{name:"010",color:"#0a0a0c"},{name:"120",color:"#09070a"}],[{name:"815",color:"#f8e5b6"},{name:"816",color:"#f7da87"},{name:"807",color:"#f6dd84"},{name:"850",color:"#ecbd03"},{name:"865",color:"#c4932a"},{name:"863",color:"#e19343"},{name:"870",color:"#ca7f06"},{name:"860",color:"#e97604"},{name:"460",color:"#d6680e"},{name:"461",color:"#b96a33"},{name:"363",color:"#dd7650"},{name:"471",color:"#d55e38"},{name:"462",color:"#cd5c04"},{name:"373",color:"#df4c4b"},{name:"472",color:"#b44106"},{name:"474",color:"#a63b02"},{name:"476",color:"#a92d11"},{name:"569",color:"#a92702"}],[{name:"560",color:"#94402c"},{name:"325",color:"#8c3935"},{name:"326",color:"#862230"},{name:"395",color:"#ae2533"},{name:"435",color:"#801f1a"},{name:"570",color:"#852122"},{name:"446",color:"#8d323c"},{name:"393",color:"#bf3434"},{name:"378",color:"#e84549"},{name:"390",color:"#ec2124"},{name:"405",color:"#d11b1e"},{name:"400",color:"#cf2805"},{name:"410",color:"#c51018"},{name:"345",color:"#bc033e"},{name:"347",color:"#b10126"},{name:"420",color:"#9e171c"},{name:"430",color:"#860423"},{name:"443",color:"#6a1527"},{name:"445",color:"#4d1120"},{name:"447",color:"#441825"}],[{name:"300",color:"#e4c9cb"},{name:"305",color:"#eec8c4"},{name:"371",color:"#f1d1c5"},{name:"370",color:"#f5c2ad"},{name:"365",color:"#f2b197"},{name:"307",color:"#ecb3b4"},{name:"912",color:"#e0b2be"},{name:"315",color:"#fbadba"},{name:"321",color:"#e77d8e"},{name:"324",color:"#b46060"},{name:"330",color:"#dc546f"},{name:"335",color:"#fb5b7a"},{name:"442",color:"#ba5457"},{name:"350",color:"#ca5758"},{name:"911",color:"#905357"},{name:"936",color:"#af2c73"},{name:"318",color:"#ce2376"},{name:"938",color:"#930e51"},{name:"940",color:"#6f1749"},{name:"937",color:"#682a42"}],[{name:"903",color:"#d0c0d8"},{name:"909",color:"#caa8bb"},{name:"910",color:"#bf9da4"},{name:"907",color:"#ad93b6"},{name:"930",color:"#775fa2"},{name:"926",color:"#9965a2"},{name:"925",color:"#764685"},{name:"927",color:"#7f3b7a"},{name:"935",color:"#554374"},{name:"933",color:"#5c567a"},{name:"942",color:"#643851"},{name:"943",color:"#45374e"},{name:"948",color:"#593d4e"},{name:"945",color:"#4c2978"},{name:"928",color:"#591662"},{name:"263",color:"#382c56"},{name:"939",color:"#422d39"},{name:"941",color:"#43233b"},{name:"944",color:"#31214a"},{name:"268",color:"#251635"}],[{name:"700",color:"#afc0b4"},{name:"652",color:"#b7d4ca"},{name:"655",color:"#b1d3c3"},{name:"602",color:"#abc8c6"},{name:"601",color:"#9bd3d3"},{name:"607",color:"#8cc4c3"},{name:"673",color:"#219294"},{name:"670",color:"#34958c"},{name:"660",color:"#3e9585"},{name:"616",color:"#35a1b6"},{name:"615",color:"#3ba0b0"},{name:"621",color:"#2c7b90"},{name:"687",color:"#0b6679"},{name:"625",color:"#0a6087"},{name:"640",color:"#003c43"},{name:"784",color:"#112428"}],[{name:"704",color:"#b6cd93"},{name:"710",color:"#8bb96e"},{name:"728",color:"#76b370"},{name:"745",color:"#168968"},{name:"720",color:"#389451"},{name:"760",color:"#257d45"},{name:"752",color:"#045c38"},{name:"777",color:"#365545"},{name:"770",color:"#2b4126"},{name:"785",color:"#0e4633"},{name:"748",color:"#08472c"},{name:"788",color:"#133829"},{name:"642",color:"#2c4645"},{name:"644",color:"#242f29"},{name:"794",color:"#1b2926"}],[{name:"521",color:"#cfd7bd"},{name:"702",color:"#d5d9af"},{name:"721",color:"#b3b089"},{name:"712",color:"#d8cf5b"},{name:"716",color:"#a0c55a"},{name:"711",color:"#969c2c"},{name:"776",color:"#6d7a47"},{name:"768",color:"#5a7241"},{name:"779",color:"#48563e"},{name:"775",color:"#7b7047"},{name:"714",color:"#7f6824"},{name:"780",color:"#40421d"},{name:"764",color:"#323c30"},{name:"793",color:"#25251a"}],[]]);var k={name:"color-palette",props:{value:{required:!0}},data:function(){return{visible:!1,originalColor:null,view:"list",PaletteHelper:w}},computed:{isListView:function(){return"list"===this.view||"list-square"===this.view},inputValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},gutermannCode:{get:function(){var e=w.findColor(this.value);return e?e.name:"-"},set:function(e){var t=w.getColorByName(e);t&&this.$emit("input",t.color)}},currentPalette:function(){return w.basicPalette}},methods:{show:function(){this.visible=!0,this.originalColor=this.value},cancel:function(){this.originalColor&&this.$emit("input",this.originalColor),this.visible=!1}}},S=k,P=(a("1c35"),a("13d5"),Object(b["a"])(S,v,y,!1,null,"083ea3c8",null)),j=P.exports,M=a("bb15"),E=a.n(M),L={name:"properties-panel",components:{ColorPalette:j},data:function(){return{tabSelected:"board",stringTab:"string",showColorPalette:!1,menuExtended:!1}},computed:{layerSelected:{get:function(){return this.value},set:function(e){this.$emit("input",e),!e&&this.recordLayerPattern&&this.$store.commit("setRecordLayerPattern",!1)}},layerColorHSL:{get:function(){return this.layerSelected?E.a.hex.hsl(this.layerSelected.color):null},set:function(e){this.layerSelected&&(this.layerSelected.color="#"+E.a.hsl.hex(e))}}},props:{value:{}},methods:{startPatternRecord:function(){if(this.recordLayerPattern){for(var e=0;e<this.layerSelected.patternSteps.length-1;e++)this.layerSelected.patternSteps[e].delta=this.layerSelected.patternSteps[e+1].nail-this.layerSelected.patternSteps[e].nail;this.layerSelected.patternSteps.length>0&&this.layerSelected.patternSteps.splice(this.layerSelected.patternSteps.length-1,1)}else this.layerSelected.patternSteps=[];this.recordLayerPattern=!this.recordLayerPattern},addPatternStep:function(){this.layerSelected.patternSteps.push({nail:0,delta:0})},removePatternStep:function(e){this.layerSelected.patternSteps.splice(e,1)},addLayer:function(){var e=this.project.addLayer();this.layerSelected=e},removeLayer:function(){if(!this.layerSelected)return!1;this.project.removeLayer(this.layerSelected),this.layerSelected=null},updateLayerColorHSL:function(){this.layerSelected.color="#"+E.a.hsl.hex(this.layerColorHSL)},roundTo1:function(e){return Math.round(10*e)/10}}},O=L,$=(a("7388"),Object(b["a"])(O,f,m,!1,null,"9e1928b2",null)),A=$.exports;a("c975"),a("25f0");function D(){return"$"+("0000000"+(Math.random()*Math.pow(36,7)<<0).toString(36)).substr(-7)}var T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Nouveau projet";Object(g["a"])(this,e),this.id=D(),this.name=t,this.saved=!1,this.board={backgroundColor:"#ffffff",width:55.88,height:55.88,radius:25,resolution:72,shape:"circle",startingAngle:0,clockwise:!0,nails:{radius:3,color:"#aaaaaa",quantity:320},nailsBetweenLayers:-1,strings:{width:1}},window.innerWidth<576&&(this.board.resolution=36),this.layers=[]}return Object(x["a"])(e,[{key:"addLayer",value:function(){var e={index:this.layers.length,id:D(),length:0,name:"Fil ".concat(this.layers.length+1),color:w.getDefaultColor(this.layers.length),visible:!0,startingNail:"auto",pattern:"default",patternSteps:[]};return this.layers.push(e),e}},{key:"getAutoNailsBetweenLayers",value:function(){return 1===this.layers.length?0:this.board.nails?this.board.nails.quantity/(this.layers.length-1)/2:10}},{key:"removeLayer",value:function(e){this.layers.splice(this.layers.indexOf(e),1)}},{key:"getRecentProjects",value:function(){var e=localStorage.getItem("projects");return e=e?JSON.parse(e):[],e}},{key:"saveAs",value:function(e){this.name=e,this.id=D();var t=this.getRecentProjects();t.push({name:this.name,id:this.id,date_creation:new Date,date_edition:new Date}),this.createLocalSave(),localStorage.setItem("projects",JSON.stringify(t))}},{key:"save",value:function(){var e=this,t=this.getRecentProjects(),a=t.find((function(t){return t.id===e.id}));a?(a.date_edition=new Date,a.name=this.name,localStorage.setItem("projects",JSON.stringify(t))):console.error("Missing project in recent projects list"),this.createLocalSave()}},{key:"createLocalSave",value:function(){var e={id:this.id,name:this.name,board:this.board,layers:this.layers};e=JSON.stringify(e),localStorage.setItem("project-"+this.id,e),this.saved=!0}},{key:"open",value:function(e){var t=localStorage.getItem("project-".concat(e));t&&(t=JSON.parse(t),this.name=t.name,this.id=t.id,this.board=t.board,this.layers=t.layers,this.saved=!0)}}]),e}(),N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll"}],staticClass:"main-page",class:{"record-mode":e.recordLayerPattern},on:{wheel:function(t){return e.$emit("wheel",t)}}},[e._t("default")],2)},R=[],B={name:"main-page"},q=B,I=(a("959e"),Object(b["a"])(q,N,R,!1,null,"71bdbec6",null)),W=I.exports,H=a("3d20"),K=a.n(H),U={name:"home",components:{PropertiesPanel:A,Board:h,MainPage:W},data:function(){return{zoom:1,showPreviousSessionModal:!1,previousProjectName:"",layerSelected:!1,menuExtended:!1,previousProjects:[]}},mounted:function(){this.loadRecentProjects()},methods:{onNailSelected:function(e){e&&this.recordLayerPattern&&this.layerSelected&&(this.layerSelected.patternSteps.push({nail:e.index,delta:0}),this.$refs.board.refreshScreenAndOverlay())},onWheelChanged:function(e){e.deltaY>0?this.setZoom(-.1):this.setZoom(.1),e.preventDefault()},loadRecentProjects:function(){var e=localStorage.getItem("projects");e&&(e=JSON.parse(e),this.previousProjects=e)},askSaveConfirmationBefore:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.project){t.next=14;break}return t.next=3,K.a.fire({title:"Enregistrer avant ?",text:"Voulez-vous enregistrer ".concat(e.project.name," avant ?"),showCancelButton:!0,showDenyButton:!0,showCloseButton:!0,cancelButtonText:"Annuler",denyButtonText:"Ne pas enregistrer",confirmButtonText:"Enregistrer"});case 3:if(a=t.sent,!a.isConfirmed){t.next=10;break}return t.next=7,e.saveOrSaveAs();case 7:return t.abrupt("return",!0);case 10:if(!a.isDismissed){t.next=12;break}return t.abrupt("return",!1);case 12:t.next=15;break;case 14:return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})))()},newProject:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.askSaveConfirmationBefore();case 2:if(a=t.sent,!1!==a){t.next=5;break}return t.abrupt("return");case 5:for(e.project=new T,r=0;r<2;r++)e.project.addLayer();case 7:case"end":return t.stop()}}),t)})))()},openProject:function(e){this.project=new T,this.project.open(e.id)},saveAs:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,K.a.fire({title:"Nom du projet",input:"text",inputValue:e.project.name,showCancelButton:!0,showCloseButton:!0,cancelButtonText:"Annuler"});case 2:a=t.sent,r=a.value,r&&(e.project.saveAs(r),e.$bvToast.toast("".concat(e.project.name," a été enregistré avec succès"),{title:"Enregistré",autoHideDelay:5e3}));case 5:case"end":return t.stop()}}),t)})))()},saveOrSaveAs:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.project.saved){t.next=5;break}e.project.save(),e.$bvToast.toast("".concat(e.project.name," a été enregistré avec succès"),{title:"Enregistré",autoHideDelay:5e3}),t.next=7;break;case 5:return t.next=7,e.saveAs();case 7:case"end":return t.stop()}}),t)})))()},closeProject:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.askSaveConfirmationBefore();case 2:if(a=t.sent,!1!==a){t.next=5;break}return t.abrupt("return");case 5:e.project=null,e.loadRecentProjects();case 7:case"end":return t.stop()}}),t)})))()},print:function(){this.settings.printMode?(this.$store.state.settings.showCenter=!1,this.$store.state.settings.middleLines=!1,this.$store.state.settings.diagonalLines=!1,this.$store.state.settings.nailNumbers=!1,this.$store.state.settings.printMode=!1):(this.$store.state.settings.showCenter=!0,this.$store.state.settings.middleLines=!0,this.$store.state.settings.diagonalLines=!0,this.$store.state.settings.nailNumbers=!0,this.$store.state.settings.printMode=!0)},setZoom:function(e){this.zoom=Math.max(Math.min(this.zoom+e,3),.1)}}},Y=U,X=(a("369e"),Object(b["a"])(Y,s,i,!1,null,"6895133a",null)),z=X.exports,V={name:"App",components:{home:z}},J=V,F=(a("5c0b"),Object(b["a"])(J,n,o,!1,null,null,null)),G=F.exports,Z=a("2f62");r["default"].use(Z["a"]);var Q=new Z["a"].Store({state:{project:null,settings:{showCenter:!1,middleLines:!1,diagonalLines:!1,nailNumbers:!1,printMode:!1},recordLayerPattern:!1,mobilePropertiesExtended:!1},getters:{},mutations:{setProject:function(e,t){e.project=t},setRecordLayerPattern:function(e,t){e.recordLayerPattern=t},setSettings:function(e,t){e.settings=t}},actions:{}}),ee=a("5f5b");a("f82b"),a("e11e"),a("9a4a"),a("4de4");function te(e){return e?new Date(e).toDateString():"-"}r["default"].filter("date",te),r["default"].filter("number",(function(e){return e>0||e<0?(+e).toLocaleString():"-"}));r["default"].mixin({computed:{project:{get:function(){return this.$store.state.project},set:function(e){this.$store.commit("setProject",e)}},settings:{get:function(){return this.$store.state.settings},set:function(e){this.$store.commit("setSettings",e)}},board:{get:function(){return this.$store.state.project?this.$store.state.project.board:null},set:function(e){this.$store.state.project.board=e}},layers:{get:function(){return this.$store.state.project?this.$store.state.project.layers:null},set:function(e){this.$store.state.project.layers=e}},recordLayerPattern:{get:function(){return this.$store.state.recordLayerPattern},set:function(e){this.$store.commit("setRecordLayerPattern",e)}},isMobile:function(){return window.innerWidth<576},isMobileLandscape:function(){return window.innerHeight<576}}});var ae=a("b76a"),re=a.n(ae),ne=a("34f3");r["default"].config.productionTip=!1,r["default"].use(ee["a"]),r["default"].use(ne["a"]),r["default"].component("draggable",re.a),new r["default"]({store:Q,render:function(e){return e(G)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},7388:function(e,t,a){"use strict";a("3602")},"7ae5":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("cb29");var r=a("d4ec"),n=a("bee2"),o=function(){function e(t){Object(r["a"])(this,e),this.element=document.getElementById(t),this.context=this.element.getContext("2d"),this.context.strokeStyle="#000",this.context.fillStyle="#f26a63"}return Object(n["a"])(e,[{key:"clear",value:function(e,t){this.context.clearRect(0,0,this.element.width,this.element.height),e&&this.fill(e,t)}},{key:"fill",value:function(e,t){this.context.globalAlpha=t||1,this.context.fillStyle=e,this.context.fillRect(0,0,this.element.width,this.element.height),this.context.globalAlpha=1}}]),e}()},"959e":function(e,t,a){"use strict";a("3e2c")},"9c0c":function(e,t,a){},efe0:function(e,t,a){},f42f:function(e,t,a){},fa8f:function(e,t,a){}});
//# sourceMappingURL=app.743abffb.js.map