(function(t){function e(e){for(var s,o,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},r={app:0},n=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/string-art-generator/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},3409:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("home")],1)},n=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("b-navbar",{staticClass:"main-menu",attrs:{variant:"dark",fixed:"top"}},[t.isMobile?a("b-btn",{attrs:{variant:"dark"},on:{click:function(e){t.$store.state.mobilePropertiesExtended=!t.$store.state.mobilePropertiesExtended}}},[a("i",{staticClass:"far fa-bars"})]):t._e(),t.project?[a("b-dropdown",{attrs:{text:"Menu","no-caret":""}},[a("b-dropdown-item",{on:{click:t.newProject}},[t._v("Nouveau")]),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:t.saveOrSaveAs}},[t._v("Enregistrer")]),a("b-dropdown-item",{on:{click:t.saveAs}},[t._v("Enregistrer Sous")]),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:t.closeProject}},[t._v("Fermer le projet")])],1),a("b-dropdown",{attrs:{text:"Affichage","no-caret":""}},[a("b-dropdown-item",{on:{click:function(e){t.$store.state.settings.middleLines=!t.$store.state.settings.middleLines}}},[a("b-checkbox",{attrs:{checked:t.$store.state.settings.middleLines}},[t._v("Afficher repère central")])],1),a("b-dropdown-item",{on:{click:function(e){t.$store.state.settings.diagonalLines=!t.$store.state.settings.diagonalLines}}},[a("b-checkbox",{attrs:{checked:t.$store.state.settings.diagonalLines}},[t._v("Afficher lignes diagonale")])],1),a("b-dropdown-item",{on:{click:function(e){t.$store.state.settings.nailNumbers=!t.$store.state.settings.nailNumbers}}},[a("b-checkbox",{attrs:{checked:t.$store.state.settings.nailNumbers}},[t._v("Afficher le numéro des clous")])],1)],1),a("b-btn",{attrs:{variant:"transparent"},on:{click:function(e){return e.stopPropagation(),t.saveOrSaveAs(e)}}},[a("i",{staticClass:"far fa-save"})]),a("b-btn",{attrs:{variant:"transparent",disabled:""},on:{click:function(t){t.stopPropagation()}}},[a("i",{staticClass:"far fa-undo"})]),a("b-btn",{attrs:{variant:"transparent",disabled:""},on:{click:function(t){t.stopPropagation()}}},[a("i",{staticClass:"far fa-redo"})]),a("div",{staticClass:"separator"}),a("b-btn",{attrs:{variant:"transparent"},on:{click:function(e){return e.stopPropagation(),t.setZoom(-.1)}}},[a("i",{staticClass:"far fa-search-minus"})]),a("div",{staticClass:"zoom"},[t._v(t._s(Math.round(100*t.zoom))+"%")]),a("b-btn",{attrs:{variant:"transparent"},on:{click:function(e){return e.stopPropagation(),t.setZoom(.1)}}},[a("i",{staticClass:"far fa-search-plus"})]),t.isMobile?t._e():[a("div",{staticClass:"separator"}),t.project?a("b-input",{staticClass:"project-name",model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}}):t._e()]]:t._e(),t.isMobile?t._e():[a("b-navbar-brand",{staticClass:"ml-auto"},[t._v("String Art Generator")])]],2),t.project?[a("properties-panel",{model:{value:t.layerSelected,callback:function(e){t.layerSelected=e},expression:"layerSelected"}}),a("main-page",[a("board",{attrs:{zoom:t.zoom}})],1)]:[a("div",{staticClass:"welcome-screen"},[a("b-container",[a("h5",{},[t._v("String Art Generator v0.1")]),a("hr"),a("div",{staticClass:"buttons"},[a("h4",{staticClass:"text-center"},[t._v("Bienvenue Arianne")]),a("b-btn",{attrs:{block:"",variant:"primary"},on:{click:t.newProject}},[t._v("Nouveau projet")])],1),a("div",{staticClass:"previous-projects"},[a("h4",{staticClass:"text-center"},[t._v("Projets récents")]),t.previousProjects&&t.previousProjects.length>0?a("div",{staticClass:"project-list"},t._l(t.previousProjects,(function(e){return a("div",{key:e.id,staticClass:"project",on:{click:function(a){return t.openProject(e)}}},[a("div",{staticClass:"date"},[t._v(t._s(t._f("date")(e.date_creation)))]),a("div",{staticClass:"name"},[t._v(t._s(e.name))])])})),0):[a("p",{staticClass:"empty text-center"},[t._v("Pas encore de projets récents...")])]],2)])],1)]],2)},i=[],l=(a("b0c0"),a("96cf"),a("1da1")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"board"},[a("canvas",{style:{transform:"scale("+t.zoom+")"},attrs:{id:"board-canvas",width:t.board.width*t.resolution,height:t.board.height*t.resolution}})])},u=[],d=(a("a4d3"),a("e01a"),a("d28b"),a("cb29"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("d4ec")),p=a("bee2"),b=function(){function t(e){Object(d["a"])(this,t),this.element=document.getElementById(e),this.context=this.element.getContext("2d"),this.context.strokeStyle="#000",this.context.fillStyle="#f26a63"}return Object(p["a"])(t,[{key:"clear",value:function(t,e){this.context.clearRect(0,0,this.element.width,this.element.height),t&&this.fill(t,e)}},{key:"fill",value:function(t,e){this.context.globalAlpha=e||1,this.context.fillStyle=t,this.context.fillRect(0,0,this.element.width,this.element.height),this.context.globalAlpha=1}}]),t}(),h={name:"board",props:{zoom:{type:Number}},data:function(){return{refreshRequired:!0,canvas:null,drawing:!1,nails:[]}},computed:{nailsBetweenLayers:function(){return-1===this.board.nailsBetweenLayers?this.nails?this.nails.length/(this.layers.length-1)/2:10:this.board.nailsBetweenLayers},resolution:function(){return this.board.resolution},centerX:function(){return this.board.width*this.resolution/2},centerY:function(){return this.board.width*this.resolution/2}},mounted:function(){this.canvas=new b("board-canvas"),this.redraw()},created:function(){this.updateLoop()},methods:{updateLoop:function(){var t=this;window.requestAnimationFrame((function(){t.refreshRequired&&t.redraw(),t.updateLoop()}))},redraw:function(){if(this.drawing)return!1;this.drawing=!0,this.canvas.clear(this.board.backgroundColor),this.generateNails(),this.drawLayers(),this.drawNails(),this.refreshRequired=!1,this.drawing=!1},generateNails:function(){this.nails=[];for(var t=0;t<this.board.nails.quantity;t++){var e=this.board.startingAngle+90+(this.board.clockwise?-1:1)*t*360/this.board.nails.quantity;e*=Math.PI/180,this.nails.push({x:this.centerX+this.board.radius*this.resolution*Math.cos(e),y:this.centerY+this.board.radius*this.resolution*Math.sin(e),textX:this.centerX+1.05*this.board.radius*this.resolution*Math.cos(e),textY:this.centerY+1.05*this.board.radius*this.resolution*Math.sin(e)})}},drawNails:function(){this.canvas.context.strokeStyle="#bbb",this.canvas.context.lineWidth=1,this.$store.state.settings.middleLines&&(this.canvas.context.beginPath(),this.canvas.context.moveTo(0,this.centerY),this.canvas.context.lineTo(this.board.width*this.resolution,this.centerY),this.canvas.context.stroke(),this.canvas.context.beginPath(),this.canvas.context.moveTo(this.centerX,0),this.canvas.context.lineTo(this.centerX,this.board.height*this.resolution),this.canvas.context.stroke()),this.$store.state.settings.diagonalLines&&(this.canvas.context.beginPath(),this.canvas.context.moveTo(0,0),this.canvas.context.lineTo(this.board.width*this.resolution,this.board.height*this.resolution),this.canvas.context.stroke(),this.canvas.context.beginPath(),this.canvas.context.moveTo(0,this.board.height*this.resolution),this.canvas.context.lineTo(this.board.width*this.resolution,0),this.canvas.context.stroke()),this.canvas.context.fillStyle=this.board.nails.color;var t=0,e=!0,a=!1,s=void 0;try{for(var r,n=this.nails[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var o=r.value;this.canvas.context.beginPath(),this.canvas.context.arc(o.x,o.y,this.board.nails.radius*this.resolution/20,0,2*Math.PI),this.canvas.context.fill(),this.settings.nailNumbers&&this.canvas.context.strokeText(t,o.textX+5,o.textY+5),t+=1}}catch(i){a=!0,s=i}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}},drawLayers:function(){var t=0,e=!0,a=!1,s=void 0;try{for(var r,n=this.layers[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var o=r.value;this.drawLayer(t,o),t++}}catch(i){a=!0,s=i}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}},drawLayer:function(t,e){if(!e.visible)return!1;this.canvas.context.strokeStyle=e.color,this.canvas.context.lineWidth=this.board.strings.width;var a=Math.round(-t*this.nailsBetweenLayers);this.canvas.context.beginPath();for(var s=0;s<this.nails.length/2;s++){var r=this.getNail(a+s);this.canvas.context.moveTo(r.x,r.y),r=this.getNail(a+2*s+this.nails.length/2),this.canvas.context.lineTo(r.x,r.y)}this.canvas.context.stroke()},modulo:function(t,e){var a=Number(t)%Number(e);return a<0?e+a:a},getNail:function(t){return this.nails[this.modulo(Math.round(t),this.nails.length)]}},watch:{board:{deep:!0,handler:function(){this.refreshRequired=!0}},settings:{deep:!0,handler:function(){this.refreshRequired=!0}},layers:{deep:!0,handler:function(){this.refreshRequired=!0}}}},v=h,f=(a("f153"),a("2877")),m=Object(f["a"])(v,c,u,!1,null,"efe32be2",null),g=m.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"properties-panel",class:{extended:t.$store.state.mobilePropertiesExtended}},[t.menuExtended?a("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"primary"},on:{click:function(e){t.$store.state.mobilePropertiesExtended=!1}}},[a("i",{staticClass:"far fa-arrow-right"})]):t._e(),!t.isMobile||t.$store.state.mobilePropertiesExtended?a("div",{staticClass:"properties-group",attrs:{id:"properties"}},[t.layerSelected?t._e():[a("div",{staticClass:"tabs"},[a("b-btn",{class:{active:"board"===t.tabSelected},attrs:{variant:"tab"},on:{click:function(e){t.tabSelected="board"}}},[t._v("Plateau")]),a("b-btn",{class:{active:"shape"===t.tabSelected},attrs:{variant:"tab"},on:{click:function(e){t.tabSelected="shape"}}},[t._v("Forme")]),a("b-btn",{class:{active:"nails"===t.tabSelected},attrs:{variant:"tab"},on:{click:function(e){t.tabSelected="nails"}}},[t._v("Clous")])],1),"board"===t.tabSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Fond")]),a("b-input",{attrs:{type:"text",maxlength:"7"},model:{value:t.board.backgroundColor,callback:function(e){t.$set(t.board,"backgroundColor",e)},expression:"board.backgroundColor"}}),a("b-input",{staticClass:"ml-1",attrs:{type:"color"},model:{value:t.board.backgroundColor,callback:function(e){t.$set(t.board,"backgroundColor",e)},expression:"board.backgroundColor"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Taille (cm)")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:t.board.width,callback:function(e){t.$set(t.board,"width",t._n(e))},expression:"board.width"}}),a("b-input-group-text",{staticClass:"mx-2"},[t._v("x")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:t.board.height,callback:function(e){t.$set(t.board,"height",t._n(e))},expression:"board.height"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Taille fils")]),a("b-input",{attrs:{type:"number",min:"0.1",max:"5",step:"0.1"},model:{value:t.board.strings.width,callback:function(e){t.$set(t.board.strings,"width",t._n(e))},expression:"board.strings.width"}}),a("b-input-group-text",{staticClass:"pl-2"},[t._v("px")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Qualité")]),a("b-select",{model:{value:t.board.resolution,callback:function(e){t.$set(t.board,"resolution",t._n(e))},expression:"board.resolution"}},t._l(50,(function(e){return a("option",{key:"resolution-"+e,domProps:{value:e+1}},[t._v(t._s(e+1))])})),0)],1)],1)],1):t._e(),"shape"===t.tabSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Forme de base")]),a("b-select",{model:{value:t.board.shape,callback:function(e){t.$set(t.board,"shape",e)},expression:"board.shape"}},[a("option",{attrs:{value:"circle"}},[t._v("Cercle")])])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Rayon")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:t.board.radius,callback:function(e){t.$set(t.board,"radius",t._n(e))},expression:"board.radius"}}),a("b-input-group-text",{staticClass:"pl-2"},[t._v("cm")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Espacement")]),a("b-select",{model:{value:t.board.nailsBetweenLayers,callback:function(e){t.$set(t.board,"nailsBetweenLayers",t._n(e))},expression:"board.nailsBetweenLayers"}},[a("option",{attrs:{value:"-1"}},[t._v("Automatique")]),t._l(150,(function(e){return a("option",{key:"resolution-"+e,domProps:{value:e+1}},[t._v(t._s(e+1)+" clous")])}))],2)],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Angle départ")]),a("b-input",{attrs:{type:"number",min:"0",max:"360",step:"15"},model:{value:t.board.startingAngle,callback:function(e){t.$set(t.board,"startingAngle",t._n(e))},expression:"board.startingAngle"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Sens horaire")]),a("b-checkbox",{model:{value:t.board.clockwise,callback:function(e){t.$set(t.board,"clockwise",e)},expression:"board.clockwise"}})],1)],1)],1):t._e(),"nails"===t.tabSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Nombre")]),a("b-select",{model:{value:t.board.nails.quantity,callback:function(e){t.$set(t.board.nails,"quantity",t._n(e))},expression:"board.nails.quantity"}},t._l(999,(function(e){return a("option",{key:"nail-"+e,domProps:{value:e+1}},[t._v(t._s(e+1))])})),0)],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Diamètre")]),a("b-input",{attrs:{type:"number",min:"0.5",max:"25",step:"0.25"},model:{value:t.board.nails.radius,callback:function(e){t.$set(t.board.nails,"radius",t._n(e))},expression:"board.nails.radius"}}),a("b-input-group-text",{staticClass:"pl-2"},[t._v("mm")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Couleur")]),a("b-input",{attrs:{type:"text",maxlength:"7"},model:{value:t.board.nails.color,callback:function(e){t.$set(t.board.nails,"color",e)},expression:"board.nails.color"}}),a("b-input",{staticClass:"ml-1",attrs:{type:"color"},model:{value:t.board.nails.color,callback:function(e){t.$set(t.board.nails,"color",e)},expression:"board.nails.color"}})],1)],1)],1):t._e()],t.layerSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Nom")]),a("b-input",{attrs:{type:"text"},model:{value:t.layerSelected.name,callback:function(e){t.$set(t.layerSelected,"name",e)},expression:"layerSelected.name"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Couleur")]),a("b-input",{attrs:{type:"text",maxlength:"7"},model:{value:t.layerSelected.color,callback:function(e){t.$set(t.layerSelected,"color",e)},expression:"layerSelected.color"}}),a("b-input",{staticClass:"ml-1",attrs:{type:"color"},model:{value:t.layerSelected.color,callback:function(e){t.$set(t.layerSelected,"color",e)},expression:"layerSelected.color"}})],1),a("b-input-group",{staticClass:"mt-1"},[a("b-input",{attrs:{type:"number",min:"0",max:"360"},on:{change:t.updateLayerColorHSL},model:{value:t.layerColorHSL[0],callback:function(e){t.$set(t.layerColorHSL,0,t._n(e))},expression:"layerColorHSL[0]"}}),a("b-input-group-text",{staticClass:"px-2"},[t._v("°")]),a("b-input",{attrs:{type:"number",min:"0",max:"100"},on:{change:t.updateLayerColorHSL},model:{value:t.layerColorHSL[1],callback:function(e){t.$set(t.layerColorHSL,1,t._n(e))},expression:"layerColorHSL[1]"}}),a("b-input-group-text",{staticClass:"px-2"},[t._v("%")]),a("b-input",{attrs:{type:"number",min:"0",max:"100"},on:{change:t.updateLayerColorHSL},model:{value:t.layerColorHSL[2],callback:function(e){t.$set(t.layerColorHSL,2,t._n(e))},expression:"layerColorHSL[2]"}}),a("b-input-group-text",{staticClass:"px-2"},[t._v("%")])],1)],1)],1):t._e()],2):t._e(),a("div",{staticClass:"properties-group",attrs:{id:"layers"}},[a("h4",[t._v("Calques")]),a("div",{staticClass:"content"},[a("div",{staticClass:"layer",class:{active:!t.layerSelected},on:{click:function(e){t.layerSelected=null}}},[a("div",{staticClass:"visibility"}),a("div",{staticClass:"name"},[t._v(" Board ")])]),a("draggable",{attrs:{"ghost-class":"list-item-ghost","drag-class":"list-item-drag",animation:"150"},model:{value:t.layers,callback:function(e){t.layers=e},expression:"layers"}},t._l(t.layers,(function(e){return a("div",{key:e.id,staticClass:"layer",class:{active:t.layerSelected===e},on:{click:function(a){t.layerSelected=e}}},[a("div",{staticClass:"visibility",on:{click:function(t){t.stopPropagation(),e.visible=!e.visible}}},[e.visible?a("i",{staticClass:"far fa-eye fa-fw"}):a("i",{staticClass:"far fa-eye-slash fa-fw"})]),a("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),a("div",{staticClass:"color"},[a("i",{style:{color:e.color}},[t._v("⬤")])])])})),0)],1),a("div",{staticClass:"actions"},[a("b-btn",{on:{click:t.addLayer}},[a("i",{staticClass:"far fa-plus-square"})]),a("b-btn",{staticClass:"ml-auto",attrs:{disabled:null===t.layerSelected},on:{click:t.removeLayer}},[a("i",{staticClass:"far fa-trash"})])],1)])],1)},x=[],_=a("bb15"),C=a.n(_),k={name:"properties-panel",data:function(){return{tabSelected:"board",menuExtended:!1}},computed:{layerSelected:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},layerColorHSL:{get:function(){return this.layerSelected?C.a.hex.hsl(this.layerSelected.color):null},set:function(t){this.layerSelected&&(this.layerSelected.color="#"+C.a.hsl.hex(t))}}},props:{value:{}},methods:{addLayer:function(){var t=this.project.addLayer();this.layerSelected=t},removeLayer:function(){if(!this.layerSelected)return!1;this.project.removeLayer(this.layerSelected),this.layerSelected=null},updateLayerColorHSL:function(){this.layerSelected.color="#"+C.a.hsl.hex(this.layerColorHSL)}}},w=k,S=(a("f186"),Object(f["a"])(w,y,x,!1,null,"2531dfa2",null)),j=S.exports,P=(a("7db0"),a("c975"),a("a434"),a("ade3")),$=function(){function t(){Object(d["a"])(this,t)}return Object(p["a"])(t,null,[{key:"getDefaultColor",value:function(t){return this.defaultPalette[t%this.defaultPalette.length]}}]),t}();Object(P["a"])($,"defaultPalette",["#051f24","#1d758a","#036074","#5b93a3","#3587a3","#3aa1aa","#93cccc","#8eb1af","#88babf"]);a("25f0");function L(){return"$"+("0000000"+(Math.random()*Math.pow(36,7)<<0).toString(36)).substr(-7)}var O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Nouveau projet";Object(d["a"])(this,t),this.id=L(),this.name=e,this.saved=!1,this.board={backgroundColor:"#ffffff",width:55.88,height:55.88,radius:25,resolution:25,shape:"circle",startingAngle:0,clockwise:!0,nails:{radius:3,color:"#aaaaaa",quantity:320},nailsBetweenLayers:-1,strings:{width:1}},window.innerWidth<576&&(this.board.resolution=10),this.layers=[]}return Object(p["a"])(t,[{key:"addLayer",value:function(){var t={index:this.layers.length,id:L(),name:"Fil ".concat(this.layers.length+1),color:$.getDefaultColor(this.layers.length),visible:!0};return this.layers.push(t),t}},{key:"removeLayer",value:function(t){this.layers.splice(this.layers.indexOf(t),1)}},{key:"getRecentProjects",value:function(){var t=localStorage.getItem("projects");return t=t?JSON.parse(t):[],t}},{key:"saveAs",value:function(t){this.name=t,this.id=L();var e=this.getRecentProjects();e.push({name:this.name,id:this.id,date_creation:new Date,date_edition:new Date}),this.createLocalSave(),localStorage.setItem("projects",JSON.stringify(e))}},{key:"save",value:function(){var t=this,e=this.getRecentProjects(),a=e.find((function(e){return e.id===t.id}));a?(a.date_edition=new Date,a.name=this.name,localStorage.setItem("projects",JSON.stringify(e))):console.error("Missing project in recent projects list"),this.createLocalSave()}},{key:"createLocalSave",value:function(){var t={id:this.id,name:this.name,board:this.board,layers:this.layers};t=JSON.stringify(t),localStorage.setItem("project-"+this.id,t),this.saved=!0}},{key:"open",value:function(t){var e=localStorage.getItem("project-".concat(t));e&&(e=JSON.parse(e),this.name=e.name,this.id=e.id,this.board=e.board,this.layers=e.layers,this.saved=!0)}}]),t}(),N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-page"},[t._t("default")],2)},A=[],M={name:"main-page"},E=M,T=Object(f["a"])(E,N,A,!1,null,"17114284",null),H=T.exports,R=a("3d20"),q=a.n(R),B={name:"home",components:{PropertiesPanel:j,Board:g,MainPage:H},data:function(){return{zoom:1,showPreviousSessionModal:!1,previousProjectName:"",layerSelected:!1,menuExtended:!1,previousProjects:[]}},mounted:function(){this.loadRecentProjects()},methods:{loadRecentProjects:function(){var t=localStorage.getItem("projects");t&&(t=JSON.parse(t),this.previousProjects=t)},newProject:function(){this.project=new O;for(var t=0;t<9;t++)this.project.addLayer()},openProject:function(t){this.project=new O,this.project.open(t.id)},saveAs:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q.a.fire({title:"Nom du projet",input:"text",inputValue:t.project.name,showCancelButton:!0});case 2:a=e.sent,s=a.value,s&&(t.project.saveAs(s),t.$bvToast.toast("".concat(t.project.name," a été enregistré avec succès"),{title:"Enregistré",autoHideDelay:5e3}));case 5:case"end":return e.stop()}}),e)})))()},saveOrSaveAs:function(){this.project.saved?(this.project.save(),this.$bvToast.toast("".concat(this.project.name," a été enregistré avec succès"),{title:"Enregistré",autoHideDelay:5e3})):this.saveAs()},closeProject:function(){this.project=null,this.loadRecentProjects()},setZoom:function(t){this.zoom=Math.max(Math.min(this.zoom+t,3),.1)}}},z=B,D=(a("b876"),Object(f["a"])(z,o,i,!1,null,"70d389ee",null)),I=D.exports,J={name:"App",components:{home:I}},X=J,Y=(a("5c0b"),Object(f["a"])(X,r,n,!1,null,null,null)),F=Y.exports,W=a("2f62");s["default"].use(W["a"]);var Z=new W["a"].Store({state:{project:null,settings:{middleLines:!1,diagonalLines:!1,nailNumbers:!1},mobilePropertiesExtended:!1},getters:{},mutations:{setProject:function(t,e){t.project=e},setSettings:function(t,e){t.settings=e}},actions:{}}),G=a("5f5b");a("f82b"),a("e11e"),a("9a4a"),a("4de4");function Q(t){return t?new Date(t).toDateString():"-"}s["default"].filter("date",Q);s["default"].mixin({computed:{project:{get:function(){return this.$store.state.project},set:function(t){this.$store.commit("setProject",t)}},settings:{get:function(){return this.$store.state.settings},set:function(t){this.$store.commit("setSettings",t)}},board:{get:function(){return this.$store.state.project?this.$store.state.project.board:null},set:function(t){this.$store.state.project.board=t}},layers:{get:function(){return this.$store.state.project?this.$store.state.project.layers:null},set:function(t){this.$store.state.project.layers=t}},isMobile:function(){return window.innerWidth<576}}});var V=a("b76a"),K=a.n(V);s["default"].config.productionTip=!1,s["default"].use(G["a"]),s["default"].component("draggable",K.a),new s["default"]({store:Z,render:function(t){return t(F)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var s=a("9c0c"),r=a.n(s);r.a},9250:function(t,e,a){},"9c0c":function(t,e,a){},b876:function(t,e,a){"use strict";var s=a("3409"),r=a.n(s);r.a},eed7:function(t,e,a){},f153:function(t,e,a){"use strict";var s=a("9250"),r=a.n(s);r.a},f186:function(t,e,a){"use strict";var s=a("eed7"),r=a.n(s);r.a}});
//# sourceMappingURL=app.4cdaa221.js.map