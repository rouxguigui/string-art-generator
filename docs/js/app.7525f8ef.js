(function(t){function e(e){for(var r,i,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},n={app:0},s=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/string-art-generator/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0db5":function(t,e,a){},1452:function(t,e,a){},"2c39":function(t,e,a){},4030:function(t,e,a){"use strict";var r=a("2c39"),n=a.n(r);n.a},"4e49":function(t,e,a){"use strict";var r=a("1452"),n=a.n(r);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("home")],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("b-navbar",{staticClass:"main-menu",attrs:{variant:"dark",fixed:"top"}},[t.isMobile?a("b-btn",{attrs:{variant:"transparent"},on:{click:function(e){t.$store.state.mobilePropertiesExtended=!t.$store.state.mobilePropertiesExtended}}},[a("i",{staticClass:"far fa-bars"})]):t._e(),t.project?[a("b-dropdown",{attrs:{text:"Menu","no-caret":""}},[a("b-dropdown-item",{on:{click:t.newProject}},[t._v("Nouveau")]),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:t.saveOrSaveAs}},[t._v("Enregistrer")]),a("b-dropdown-item",{on:{click:t.saveAs}},[t._v("Enregistrer Sous")]),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:t.closeProject}},[t._v("Fermer le projet")])],1),t.isMobile||t.isMobileLandscape?t._e():a("b-dropdown",{attrs:{text:"Affichage","no-caret":""}},[a("b-dropdown-item",{on:{click:function(e){t.$store.state.settings.middleLines=!t.$store.state.settings.middleLines}}},[a("b-checkbox",{attrs:{checked:t.$store.state.settings.middleLines}},[t._v("Afficher repère central")])],1),a("b-dropdown-item",{on:{click:function(e){t.$store.state.settings.diagonalLines=!t.$store.state.settings.diagonalLines}}},[a("b-checkbox",{attrs:{checked:t.$store.state.settings.diagonalLines}},[t._v("Afficher lignes diagonale")])],1),a("b-dropdown-item",{on:{click:function(e){t.$store.state.settings.nailNumbers=!t.$store.state.settings.nailNumbers}}},[a("b-checkbox",{attrs:{checked:t.$store.state.settings.nailNumbers}},[t._v("Afficher le numéro des clous")])],1)],1),a("b-btn",{attrs:{variant:"transparent"},on:{click:function(e){return e.stopPropagation(),t.saveOrSaveAs(e)}}},[a("i",{staticClass:"far fa-save"})]),a("b-btn",{attrs:{variant:"transparent",disabled:""},on:{click:function(t){t.stopPropagation()}}},[a("i",{staticClass:"far fa-undo"})]),a("b-btn",{attrs:{variant:"transparent",disabled:""},on:{click:function(t){t.stopPropagation()}}},[a("i",{staticClass:"far fa-redo"})]),a("div",{staticClass:"separator"}),a("b-btn",{attrs:{variant:"transparent"},on:{click:function(e){return e.stopPropagation(),t.setZoom(-.1)}}},[a("i",{staticClass:"far fa-search-minus"})]),a("div",{staticClass:"zoom"},[t._v(t._s(Math.round(100*t.zoom))+"%")]),a("b-btn",{attrs:{variant:"transparent"},on:{click:function(e){return e.stopPropagation(),t.setZoom(.1)}}},[a("i",{staticClass:"far fa-search-plus"})]),t.isMobile?t._e():[a("div",{staticClass:"separator"}),t.project?a("b-input",{staticClass:"project-name",model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}}):t._e()]]:t._e(),t.isMobile?t._e():[a("b-navbar-brand",{staticClass:"ml-auto"},[t._v("String Art Generator")])]],2),t.project?[a("properties-panel",{model:{value:t.layerSelected,callback:function(e){t.layerSelected=e},expression:"layerSelected"}}),a("main-page",[a("board",{attrs:{zoom:t.zoom}})],1)]:[a("div",{staticClass:"welcome-screen"},[a("b-container",[t.isMobile?t._e():[a("h5",{},[t._v("String Art Generator v0.1")]),a("hr")],a("div",{staticClass:"buttons"},[a("h4",{staticClass:"text-center"},[t._v("Bienvenue Arianne")]),a("b-btn",{attrs:{block:"",variant:"primary"},on:{click:t.newProject}},[t._v("Nouveau projet")])],1),a("div",{staticClass:"previous-projects"},[a("h4",{staticClass:"text-center"},[t._v("Projets récents")]),t.previousProjects&&t.previousProjects.length>0?a("div",{staticClass:"project-list"},t._l(t.previousProjects,(function(e){return a("div",{key:e.id,staticClass:"project",on:{click:function(a){return t.openProject(e)}}},[a("div",{staticClass:"date"},[t._v(t._s(t._f("date")(e.date_creation)))]),a("div",{staticClass:"name"},[t._v(t._s(e.name))])])})),0):[a("p",{staticClass:"empty text-center"},[t._v("Pas encore de projets récents...")])]],2)],2)],1)]],2)},o=[],c=(a("b0c0"),a("96cf"),a("1da1")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"board"},[a("canvas",{style:{transform:"scale("+t.zoom+")"},attrs:{id:"board-canvas",width:t.board.width*t.resolution,height:t.board.height*t.resolution}})])},u=[],d=(a("a4d3"),a("e01a"),a("d28b"),a("cb29"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("d4ec")),p=a("bee2"),b=function(){function t(e){Object(d["a"])(this,t),this.element=document.getElementById(e),this.context=this.element.getContext("2d"),this.context.strokeStyle="#000",this.context.fillStyle="#f26a63"}return Object(p["a"])(t,[{key:"clear",value:function(t,e){this.context.clearRect(0,0,this.element.width,this.element.height),t&&this.fill(t,e)}},{key:"fill",value:function(t,e){this.context.globalAlpha=e||1,this.context.fillStyle=t,this.context.fillRect(0,0,this.element.width,this.element.height),this.context.globalAlpha=1}}]),t}(),h={name:"board",props:{zoom:{type:Number}},data:function(){return{refreshRequired:!0,canvas:null,drawing:!1,nails:[]}},computed:{nailsBetweenLayers:function(){return-1===this.board.nailsBetweenLayers?this.nails?this.nails.length/(this.layers.length-1)/2:10:this.board.nailsBetweenLayers},resolution:function(){return this.board.resolution},centerX:function(){return this.board.width*this.resolution/2},centerY:function(){return this.board.width*this.resolution/2}},mounted:function(){this.canvas=new b("board-canvas"),this.redraw()},created:function(){this.updateLoop()},methods:{updateLoop:function(){var t=this;window.requestAnimationFrame((function(){t.refreshRequired&&t.redraw(),t.updateLoop()}))},redraw:function(){if(this.drawing)return!1;this.drawing=!0,this.canvas.clear(this.board.backgroundColor),this.generateNails(),this.drawLayers(),this.drawNails(),this.refreshRequired=!1,this.drawing=!1},generateNails:function(){this.nails=[];for(var t=0;t<this.board.nails.quantity;t++){var e=this.board.startingAngle+90+(this.board.clockwise?-1:1)*t*360/this.board.nails.quantity;e*=Math.PI/180,this.nails.push({x:this.centerX+this.board.radius*this.resolution*Math.cos(e),y:this.centerY+this.board.radius*this.resolution*Math.sin(e),textX:this.centerX+1.05*this.board.radius*this.resolution*Math.cos(e),textY:this.centerY+1.05*this.board.radius*this.resolution*Math.sin(e)})}},drawNails:function(){this.canvas.context.strokeStyle="#bbb",this.canvas.context.lineWidth=1,this.$store.state.settings.middleLines&&(this.canvas.context.beginPath(),this.canvas.context.moveTo(0,this.centerY),this.canvas.context.lineTo(this.board.width*this.resolution,this.centerY),this.canvas.context.stroke(),this.canvas.context.beginPath(),this.canvas.context.moveTo(this.centerX,0),this.canvas.context.lineTo(this.centerX,this.board.height*this.resolution),this.canvas.context.stroke()),this.$store.state.settings.diagonalLines&&(this.canvas.context.beginPath(),this.canvas.context.moveTo(0,0),this.canvas.context.lineTo(this.board.width*this.resolution,this.board.height*this.resolution),this.canvas.context.stroke(),this.canvas.context.beginPath(),this.canvas.context.moveTo(0,this.board.height*this.resolution),this.canvas.context.lineTo(this.board.width*this.resolution,0),this.canvas.context.stroke()),this.canvas.context.fillStyle=this.board.nails.color;var t=0,e=!0,a=!1,r=void 0;try{for(var n,s=this.nails[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var i=n.value;this.canvas.context.beginPath(),this.canvas.context.arc(i.x,i.y,this.board.nails.radius*this.resolution/20,0,2*Math.PI),this.canvas.context.fill(),this.settings.nailNumbers&&this.canvas.context.strokeText(t,i.textX+5,i.textY+5),t+=1}}catch(o){a=!0,r=o}finally{try{e||null==s.return||s.return()}finally{if(a)throw r}}},drawLayers:function(){var t=0,e=!0,a=!1,r=void 0;try{for(var n,s=this.layers[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var i=n.value;this.drawLayer(t,i),t++}}catch(o){a=!0,r=o}finally{try{e||null==s.return||s.return()}finally{if(a)throw r}}},drawLayer:function(t,e){if(!e.visible)return!1;this.canvas.context.strokeStyle=e.color,this.canvas.context.lineWidth=this.board.strings.width;var a=Math.round(-t*this.nailsBetweenLayers);this.canvas.context.beginPath();for(var r=0;r<this.nails.length/2;r++){var n=this.getNail(a+r);this.canvas.context.moveTo(n.x,n.y),n=this.getNail(a+2*r+this.nails.length/2),this.canvas.context.lineTo(n.x,n.y)}this.canvas.context.stroke()},modulo:function(t,e){var a=Number(t)%Number(e);return a<0?e+a:a},getNail:function(t){return this.nails[this.modulo(Math.round(t),this.nails.length)]}},watch:{board:{deep:!0,handler:function(){this.refreshRequired=!0}},settings:{deep:!0,handler:function(){this.refreshRequired=!0}},layers:{deep:!0,handler:function(){this.refreshRequired=!0}}}},f=h,v=(a("becd"),a("2877")),m=Object(v["a"])(f,l,u,!1,null,"5f45e36e",null),g=m.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"properties-panel",class:{extended:t.$store.state.mobilePropertiesExtended}},[t.menuExtended?a("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"primary"},on:{click:function(e){t.$store.state.mobilePropertiesExtended=!1}}},[a("i",{staticClass:"far fa-arrow-right"})]):t._e(),!t.isMobile||t.$store.state.mobilePropertiesExtended?a("div",{staticClass:"properties-group",attrs:{id:"properties"}},[t.layerSelected?t._e():[a("div",{staticClass:"tabs"},[a("b-btn",{class:{active:"board"===t.tabSelected},attrs:{variant:"tab"},on:{click:function(e){t.tabSelected="board"}}},[t._v("Plateau")]),a("b-btn",{class:{active:"shape"===t.tabSelected},attrs:{variant:"tab"},on:{click:function(e){t.tabSelected="shape"}}},[t._v("Forme")]),a("b-btn",{class:{active:"nails"===t.tabSelected},attrs:{variant:"tab"},on:{click:function(e){t.tabSelected="nails"}}},[t._v("Clous")])],1),"board"===t.tabSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Fond")]),a("b-input",{attrs:{type:"text",maxlength:"7"},model:{value:t.board.backgroundColor,callback:function(e){t.$set(t.board,"backgroundColor",e)},expression:"board.backgroundColor"}}),a("b-input",{staticClass:"ml-1",attrs:{type:"color"},model:{value:t.board.backgroundColor,callback:function(e){t.$set(t.board,"backgroundColor",e)},expression:"board.backgroundColor"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Taille (cm)")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:t.board.width,callback:function(e){t.$set(t.board,"width",t._n(e))},expression:"board.width"}}),a("b-input-group-text",{staticClass:"mx-2"},[t._v("x")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:t.board.height,callback:function(e){t.$set(t.board,"height",t._n(e))},expression:"board.height"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Taille fils")]),a("b-input",{attrs:{type:"number",min:"0.1",max:"5",step:"0.1"},model:{value:t.board.strings.width,callback:function(e){t.$set(t.board.strings,"width",t._n(e))},expression:"board.strings.width"}}),a("b-input-group-text",{staticClass:"pl-2"},[t._v("px")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Qualité")]),a("b-select",{model:{value:t.board.resolution,callback:function(e){t.$set(t.board,"resolution",t._n(e))},expression:"board.resolution"}},t._l(50,(function(e){return a("option",{key:"resolution-"+e,domProps:{value:e+1}},[t._v(t._s(e+1))])})),0)],1)],1)],1):t._e(),"shape"===t.tabSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Forme de base")]),a("b-select",{model:{value:t.board.shape,callback:function(e){t.$set(t.board,"shape",e)},expression:"board.shape"}},[a("option",{attrs:{value:"circle"}},[t._v("Cercle")])])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Rayon")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:t.board.radius,callback:function(e){t.$set(t.board,"radius",t._n(e))},expression:"board.radius"}}),a("b-input-group-text",{staticClass:"pl-2"},[t._v("cm")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Espacement")]),a("b-select",{model:{value:t.board.nailsBetweenLayers,callback:function(e){t.$set(t.board,"nailsBetweenLayers",t._n(e))},expression:"board.nailsBetweenLayers"}},[a("option",{attrs:{value:"-1"}},[t._v("Automatique")]),t._l(150,(function(e){return a("option",{key:"resolution-"+e,domProps:{value:e+1}},[t._v(t._s(e+1)+" clous")])}))],2)],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Angle départ")]),a("b-input",{attrs:{type:"number",min:"0",max:"360",step:"15"},model:{value:t.board.startingAngle,callback:function(e){t.$set(t.board,"startingAngle",t._n(e))},expression:"board.startingAngle"}}),a("b-input-group-text",{staticClass:"pl-2"},[t._v("°")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Sens horaire")]),a("b-checkbox",{model:{value:t.board.clockwise,callback:function(e){t.$set(t.board,"clockwise",e)},expression:"board.clockwise"}})],1)],1)],1):t._e(),"nails"===t.tabSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Nombre")]),a("b-select",{model:{value:t.board.nails.quantity,callback:function(e){t.$set(t.board.nails,"quantity",t._n(e))},expression:"board.nails.quantity"}},t._l(999,(function(e){return a("option",{key:"nail-"+e,domProps:{value:e+1}},[t._v(t._s(e+1))])})),0)],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Diamètre")]),a("b-input",{attrs:{type:"number",min:"0.5",max:"25",step:"0.25"},model:{value:t.board.nails.radius,callback:function(e){t.$set(t.board.nails,"radius",t._n(e))},expression:"board.nails.radius"}}),a("b-input-group-text",{staticClass:"pl-2"},[t._v("mm")])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Couleur")]),a("b-input",{attrs:{type:"text",maxlength:"7"},model:{value:t.board.nails.color,callback:function(e){t.$set(t.board.nails,"color",e)},expression:"board.nails.color"}}),a("b-input",{staticClass:"ml-1",attrs:{type:"color"},model:{value:t.board.nails.color,callback:function(e){t.$set(t.board.nails,"color",e)},expression:"board.nails.color"}})],1)],1)],1):t._e()],t.layerSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Nom")]),a("b-input",{attrs:{type:"text"},model:{value:t.layerSelected.name,callback:function(e){t.$set(t.layerSelected,"name",e)},expression:"layerSelected.name"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Couleur")]),a("b-input",{attrs:{type:"text",maxlength:"7"},model:{value:t.layerSelected.color,callback:function(e){t.$set(t.layerSelected,"color",e)},expression:"layerSelected.color"}}),a("b-input",{staticClass:"ml-1",attrs:{type:"color"},model:{value:t.layerSelected.color,callback:function(e){t.$set(t.layerSelected,"color",e)},expression:"layerSelected.color"}})],1),a("b-input-group",{staticClass:"mt-1"},[a("b-input",{attrs:{type:"number",min:"0",max:"360"},on:{change:t.updateLayerColorHSL},model:{value:t.layerColorHSL[0],callback:function(e){t.$set(t.layerColorHSL,0,t._n(e))},expression:"layerColorHSL[0]"}}),a("b-input-group-text",{staticClass:"px-2"},[t._v("°")]),a("b-input",{attrs:{type:"number",min:"0",max:"100"},on:{change:t.updateLayerColorHSL},model:{value:t.layerColorHSL[1],callback:function(e){t.$set(t.layerColorHSL,1,t._n(e))},expression:"layerColorHSL[1]"}}),a("b-input-group-text",{staticClass:"px-2"},[t._v("%")]),a("b-input",{attrs:{type:"number",min:"0",max:"100"},on:{change:t.updateLayerColorHSL},model:{value:t.layerColorHSL[2],callback:function(e){t.$set(t.layerColorHSL,2,t._n(e))},expression:"layerColorHSL[2]"}}),a("b-input-group-text",{staticClass:"px-2"},[t._v("%")])],1)],1)],1):t._e()],2):t._e(),a("div",{staticClass:"properties-group",attrs:{id:"layers"}},[a("h4",[t._v("Calques")]),a("div",{staticClass:"content"},[a("div",{staticClass:"layer",class:{active:!t.layerSelected},on:{click:function(e){t.layerSelected=null}}},[a("div",{staticClass:"visibility"}),a("div",{staticClass:"name"},[t._v("Plateau")])]),a("draggable",{attrs:{handle:t.isMobile||t.isMobileLandscape?".handle":null,"ghost-class":"list-item-ghost","drag-class":"list-item-drag",animation:"150"},model:{value:t.layers,callback:function(e){t.layers=e},expression:"layers"}},t._l(t.layers,(function(e){return a("div",{key:e.id,staticClass:"layer",class:{active:t.layerSelected===e},on:{click:function(a){t.layerSelected=e}}},[t.isMobile||t.isMobileLandscape?a("div",{staticClass:"handle"},[a("i",{staticClass:"far fa-bars mr-2"})]):t._e(),a("div",{staticClass:"visibility",on:{click:function(t){t.stopPropagation(),e.visible=!e.visible}}},[e.visible?a("i",{staticClass:"far fa-eye fa-fw"}):a("i",{staticClass:"far fa-eye-slash fa-fw"})]),a("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),a("div",{staticClass:"color"},[a("i",{style:{color:e.color}},[t._v("⬤")])])])})),0)],1),a("div",{staticClass:"actions"},[a("b-btn",{on:{click:t.addLayer}},[a("i",{staticClass:"far fa-plus-square"})]),a("b-btn",{staticClass:"ml-auto",attrs:{disabled:null===t.layerSelected},on:{click:t.removeLayer}},[a("i",{staticClass:"far fa-trash"})])],1)])],1)},x=[],C=a("bb15"),w=a.n(C),k={name:"properties-panel",data:function(){return{tabSelected:"board",menuExtended:!1}},computed:{layerSelected:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},layerColorHSL:{get:function(){return this.layerSelected?w.a.hex.hsl(this.layerSelected.color):null},set:function(t){this.layerSelected&&(this.layerSelected.color="#"+w.a.hsl.hex(t))}}},props:{value:{}},methods:{addLayer:function(){var t=this.project.addLayer();this.layerSelected=t},removeLayer:function(){if(!this.layerSelected)return!1;this.project.removeLayer(this.layerSelected),this.layerSelected=null},updateLayerColorHSL:function(){this.layerSelected.color="#"+w.a.hsl.hex(this.layerColorHSL)}}},_=k,S=(a("4030"),Object(v["a"])(_,y,x,!1,null,"60cb0fd4",null)),j=S.exports,P=(a("7db0"),a("c975"),a("a434"),a("ade3")),L=function(){function t(){Object(d["a"])(this,t)}return Object(p["a"])(t,null,[{key:"getDefaultColor",value:function(t){return this.defaultPalette[t%this.defaultPalette.length]}}]),t}();Object(P["a"])(L,"defaultPalette",["#051f24","#1d758a","#036074","#5b93a3","#3587a3","#3aa1aa","#93cccc","#8eb1af","#88babf"]);a("25f0");function $(){return"$"+("0000000"+(Math.random()*Math.pow(36,7)<<0).toString(36)).substr(-7)}var O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Nouveau projet";Object(d["a"])(this,t),this.id=$(),this.name=e,this.saved=!1,this.board={backgroundColor:"#ffffff",width:55.88,height:55.88,radius:25,resolution:25,shape:"circle",startingAngle:0,clockwise:!0,nails:{radius:3,color:"#aaaaaa",quantity:320},nailsBetweenLayers:-1,strings:{width:1}},window.innerWidth<576&&(this.board.resolution=10),this.layers=[]}return Object(p["a"])(t,[{key:"addLayer",value:function(){var t={index:this.layers.length,id:$(),name:"Fil ".concat(this.layers.length+1),color:L.getDefaultColor(this.layers.length),visible:!0};return this.layers.push(t),t}},{key:"removeLayer",value:function(t){this.layers.splice(this.layers.indexOf(t),1)}},{key:"getRecentProjects",value:function(){var t=localStorage.getItem("projects");return t=t?JSON.parse(t):[],t}},{key:"saveAs",value:function(t){this.name=t,this.id=$();var e=this.getRecentProjects();e.push({name:this.name,id:this.id,date_creation:new Date,date_edition:new Date}),this.createLocalSave(),localStorage.setItem("projects",JSON.stringify(e))}},{key:"save",value:function(){var t=this,e=this.getRecentProjects(),a=e.find((function(e){return e.id===t.id}));a?(a.date_edition=new Date,a.name=this.name,localStorage.setItem("projects",JSON.stringify(e))):console.error("Missing project in recent projects list"),this.createLocalSave()}},{key:"createLocalSave",value:function(){var t={id:this.id,name:this.name,board:this.board,layers:this.layers};t=JSON.stringify(t),localStorage.setItem("project-"+this.id,t),this.saved=!0}},{key:"open",value:function(t){var e=localStorage.getItem("project-".concat(t));e&&(e=JSON.parse(e),this.name=e.name,this.id=e.id,this.board=e.board,this.layers=e.layers,this.saved=!0)}}]),t}(),M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-page"},[t._t("default")],2)},A=[],N={name:"main-page"},R=N,B=Object(v["a"])(R,M,A,!1,null,"17114284",null),E=B.exports,T=a("3d20"),H=a.n(T),q={name:"home",components:{PropertiesPanel:j,Board:g,MainPage:E},data:function(){return{zoom:1,showPreviousSessionModal:!1,previousProjectName:"",layerSelected:!1,menuExtended:!1,previousProjects:[]}},mounted:function(){this.loadRecentProjects()},methods:{loadRecentProjects:function(){var t=localStorage.getItem("projects");t&&(t=JSON.parse(t),this.previousProjects=t)},askSaveConfirmationBefore:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.project){e.next=14;break}return e.next=3,H.a.fire({title:"Enregistrer avant ?",text:"Voulez-vous enregistrer ".concat(t.project.name," avant ?"),showCancelButton:!0,showDenyButton:!0,showCloseButton:!0,cancelButtonText:"Annuler",denyButtonText:"Ne pas enregistrer",confirmButtonText:"Enregistrer"});case 3:if(a=e.sent,!a.isConfirmed){e.next=10;break}return e.next=7,t.saveOrSaveAs();case 7:return e.abrupt("return",!0);case 10:if(!a.isDismissed){e.next=12;break}return e.abrupt("return",!1);case 12:e.next=15;break;case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)})))()},newProject:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.askSaveConfirmationBefore();case 2:if(a=e.sent,!1!==a){e.next=5;break}return e.abrupt("return");case 5:for(t.project=new O,r=0;r<9;r++)t.project.addLayer();case 7:case"end":return e.stop()}}),e)})))()},openProject:function(t){this.project=new O,this.project.open(t.id)},saveAs:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.a.fire({title:"Nom du projet",input:"text",inputValue:t.project.name,showCancelButton:!0,showCloseButton:!0,cancelButtonText:"Annuler"});case 2:a=e.sent,r=a.value,r&&(t.project.saveAs(r),t.$bvToast.toast("".concat(t.project.name," a été enregistré avec succès"),{title:"Enregistré",autoHideDelay:5e3}));case 5:case"end":return e.stop()}}),e)})))()},saveOrSaveAs:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.project.saved){e.next=5;break}t.project.save(),t.$bvToast.toast("".concat(t.project.name," a été enregistré avec succès"),{title:"Enregistré",autoHideDelay:5e3}),e.next=7;break;case 5:return e.next=7,t.saveAs();case 7:case"end":return e.stop()}}),e)})))()},closeProject:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.askSaveConfirmationBefore();case 2:if(a=e.sent,!1!==a){e.next=5;break}return e.abrupt("return");case 5:t.project=null,t.loadRecentProjects();case 7:case"end":return e.stop()}}),e)})))()},setZoom:function(t){this.zoom=Math.max(Math.min(this.zoom+t,3),.1)}}},D=q,z=(a("4e49"),Object(v["a"])(D,i,o,!1,null,"e031d2a8",null)),I=z.exports,J={name:"App",components:{home:I}},X=J,Y=(a("5c0b"),Object(v["a"])(X,n,s,!1,null,null,null)),F=Y.exports,W=a("2f62");r["default"].use(W["a"]);var Z=new W["a"].Store({state:{project:null,settings:{middleLines:!1,diagonalLines:!1,nailNumbers:!1},mobilePropertiesExtended:!1},getters:{},mutations:{setProject:function(t,e){t.project=e},setSettings:function(t,e){t.settings=e}},actions:{}}),G=a("5f5b");a("f82b"),a("e11e"),a("9a4a"),a("4de4");function V(t){return t?new Date(t).toDateString():"-"}r["default"].filter("date",V);r["default"].mixin({computed:{project:{get:function(){return this.$store.state.project},set:function(t){this.$store.commit("setProject",t)}},settings:{get:function(){return this.$store.state.settings},set:function(t){this.$store.commit("setSettings",t)}},board:{get:function(){return this.$store.state.project?this.$store.state.project.board:null},set:function(t){this.$store.state.project.board=t}},layers:{get:function(){return this.$store.state.project?this.$store.state.project.layers:null},set:function(t){this.$store.state.project.layers=t}},isMobile:function(){return window.innerWidth<576},isMobileLandscape:function(){return window.innerHeight<576}}});var Q=a("b76a"),K=a.n(Q);r["default"].config.productionTip=!1,r["default"].use(G["a"]),r["default"].component("draggable",K.a),new r["default"]({store:Z,render:function(t){return t(F)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var r=a("9c0c"),n=a.n(r);n.a},"9c0c":function(t,e,a){},becd:function(t,e,a){"use strict";var r=a("0db5"),n=a.n(r);n.a}});
//# sourceMappingURL=app.7525f8ef.js.map