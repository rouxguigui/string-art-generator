(function(t){function e(e){for(var n,o,i=e[0],l=e[1],c=e[2],d=0,h=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&h.push(s[o][0]),s[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/string-art-generator/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"123f":function(t,e,a){"use strict";var n=a("b423"),s=a.n(n);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("home")],1)},r=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.project?a("div",{attrs:{id:"home"}},[a("b-navbar",{staticClass:"main-menu",attrs:{variant:"dark",fixed:"top"}},[t.isMobile?a("b-btn",{attrs:{variant:"dark"},on:{click:function(e){t.$store.state.mobilePropertiesExtended=!t.$store.state.mobilePropertiesExtended}}},[a("i",{staticClass:"far fa-bars"})]):t._e(),a("b-dropdown",{attrs:{text:"Menu","no-caret":""}},[a("b-dropdown-item",{on:{click:t.newProject}},[t._v("Nouveau")]),a("b-dropdown-item",{on:{click:function(e){return t.project.open()}}},[t._v("Ouvrir")]),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:function(e){return t.project.save()}}},[t._v("Enregistrer")])],1),a("b-dropdown",{attrs:{text:"Affichage","no-caret":""}},[a("b-dropdown-item",{on:{click:function(e){t.$store.state.settings.middleLines=!t.$store.state.settings.middleLines}}},[a("b-checkbox",{attrs:{checked:t.$store.state.settings.middleLines}},[t._v("Afficher repère central")])],1),a("b-dropdown-item",{on:{click:function(e){t.$store.state.settings.diagonalLines=!t.$store.state.settings.diagonalLines}}},[a("b-checkbox",{attrs:{checked:t.$store.state.settings.diagonalLines}},[t._v("Afficher lignes diagonale")])],1),a("b-dropdown-item",{on:{click:function(e){t.$store.state.settings.nailNumbers=!t.$store.state.settings.nailNumbers}}},[a("b-checkbox",{attrs:{checked:t.$store.state.settings.nailNumbers}},[t._v("Afficher le numéro des clous")])],1)],1),a("b-btn",{attrs:{variant:"transparent"},on:{click:function(e){return e.stopPropagation(),t.setZoom(-.1)}}},[a("i",{staticClass:"far fa-search-minus"})]),a("div",{staticClass:"zoom"},[t._v(t._s(Math.round(100*t.zoom))+"%")]),a("b-btn",{attrs:{variant:"transparent"},on:{click:function(e){return e.stopPropagation(),t.setZoom(.1)}}},[a("i",{staticClass:"far fa-search-plus"})]),t.isMobile?t._e():[a("div",{staticClass:"separator"}),a("b-input",{staticClass:"project-name",model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}}),a("b-navbar-brand",{staticClass:"ml-auto"},[t._v("String Art Generator")])]],2),a("properties-panel",{model:{value:t.layerSelected,callback:function(e){t.layerSelected=e},expression:"layerSelected"}}),a("main-page",[a("board",{attrs:{zoom:t.zoom}})],1),a("b-modal",{attrs:{title:"Continuer dernier projet"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("b-btn",{on:{click:function(e){t.showPreviousSessionModal=!1}}},[t._v("Annuler")]),a("b-btn",{attrs:{variant:"primary"},on:{click:function(e){t.project.open(),t.showPreviousSessionModal=!1}}},[t._v("Ouvrir")])]},proxy:!0}],null,!1,1081639892),model:{value:t.showPreviousSessionModal,callback:function(e){t.showPreviousSessionModal=e},expression:"showPreviousSessionModal"}},[a("div",{staticClass:"text-center f-500"},[t._v("Voulez-vous ouvrir le projet "),a("u",[t._v(t._s(t.previousProjectName))])])])],1):t._e()},i=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"board"},[a("canvas",{style:{transform:"scale("+t.zoom+")"},attrs:{id:"board-canvas",width:t.board.width*t.resolution,height:t.board.height*t.resolution}})])},c=[],u=(a("a4d3"),a("e01a"),a("d28b"),a("cb29"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("d4ec")),d=a("bee2"),h=function(){function t(e){Object(u["a"])(this,t),this.element=document.getElementById(e),this.context=this.element.getContext("2d"),this.context.strokeStyle="#000",this.context.fillStyle="#f26a63"}return Object(d["a"])(t,[{key:"clear",value:function(t,e){this.context.clearRect(0,0,this.element.width,this.element.height),t&&this.fill(t,e)}},{key:"fill",value:function(t,e){this.context.globalAlpha=e||1,this.context.fillStyle=t,this.context.fillRect(0,0,this.element.width,this.element.height),this.context.globalAlpha=1}}]),t}(),p={name:"board",props:{zoom:{type:Number}},data:function(){return{refreshRequired:!0,canvas:null,drawing:!1,nails:[]}},computed:{resolution:function(){return this.board.resolution},centerX:function(){return this.board.width*this.resolution/2},centerY:function(){return this.board.width*this.resolution/2}},mounted:function(){this.canvas=new h("board-canvas"),this.redraw()},created:function(){this.updateLoop()},methods:{updateLoop:function(){var t=this;window.requestAnimationFrame((function(){t.refreshRequired&&t.redraw(),t.updateLoop()}))},redraw:function(){if(this.drawing)return!1;this.drawing=!0,this.canvas.clear(this.board.backgroundColor),this.generateNails(),this.drawLayers(),this.drawNails(),this.refreshRequired=!1,this.drawing=!1},generateNails:function(){this.nails=[];for(var t=0;t<this.board.nails;t++){var e=90-360*t/this.board.nails;e*=Math.PI/180,this.nails.push({x:this.centerX+this.board.radius*this.resolution*Math.cos(e),y:this.centerY+this.board.radius*this.resolution*Math.sin(e),textX:this.centerX+1.05*this.board.radius*this.resolution*Math.cos(e),textY:this.centerY+1.05*this.board.radius*this.resolution*Math.sin(e)})}},drawNails:function(){this.canvas.context.strokeStyle="#bbb",this.canvas.context.lineWidth=1,this.$store.state.settings.middleLines&&(this.canvas.context.beginPath(),this.canvas.context.moveTo(0,this.centerY),this.canvas.context.lineTo(this.board.width*this.resolution,this.centerY),this.canvas.context.stroke(),this.canvas.context.beginPath(),this.canvas.context.moveTo(this.centerX,0),this.canvas.context.lineTo(this.centerX,this.board.height*this.resolution),this.canvas.context.stroke()),this.$store.state.settings.diagonalLines&&(this.canvas.context.beginPath(),this.canvas.context.moveTo(0,0),this.canvas.context.lineTo(this.board.width*this.resolution,this.board.height*this.resolution),this.canvas.context.stroke(),this.canvas.context.beginPath(),this.canvas.context.moveTo(0,this.board.height*this.resolution),this.canvas.context.lineTo(this.board.width*this.resolution,0),this.canvas.context.stroke()),this.canvas.context.fillStyle="#aaa";var t=0,e=!0,a=!1,n=void 0;try{for(var s,r=this.nails[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var o=s.value;this.canvas.context.beginPath(),this.canvas.context.arc(o.x,o.y,3,0,2*Math.PI),this.canvas.context.fill(),this.settings.nailNumbers&&this.canvas.context.strokeText(t,o.textX+5,o.textY+5),t+=1}}catch(i){a=!0,n=i}finally{try{e||null==r.return||r.return()}finally{if(a)throw n}}},drawLayers:function(){var t=0,e=!0,a=!1,n=void 0;try{for(var s,r=this.layers[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var o=s.value;this.drawLayer(t,o),t++}}catch(i){a=!0,n=i}finally{try{e||null==r.return||r.return()}finally{if(a)throw n}}},drawLayer:function(t,e){if(!e.visible)return!1;this.canvas.context.strokeStyle=e.color,this.canvas.context.lineWidth=1;var a=Math.round(-t*this.nails.length/(this.layers.length-1)/2);this.canvas.context.beginPath();for(var n=0;n<this.nails.length/2;n++){var s=this.getNail(a+n);this.canvas.context.moveTo(s.x,s.y),s=this.getNail(a+2*n+this.nails.length/2),this.canvas.context.lineTo(s.x,s.y)}this.canvas.context.stroke()},modulo:function(t,e){var a=Number(t)%Number(e);return a<0?e+a:a},getNail:function(t){return this.nails[this.modulo(Math.round(t),this.nails.length)]}},watch:{board:{deep:!0,handler:function(){this.refreshRequired=!0}},settings:{deep:!0,handler:function(){this.refreshRequired=!0}},layers:{deep:!0,handler:function(){this.refreshRequired=!0}}}},b=p,f=(a("123f"),a("2877")),v=Object(f["a"])(b,l,c,!1,null,"6080695d",null),m=v.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"properties-panel",class:{extended:t.$store.state.mobilePropertiesExtended}},[t.menuExtended?a("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"primary"},on:{click:function(e){t.$store.state.mobilePropertiesExtended=!1}}},[a("i",{staticClass:"far fa-arrow-right"})]):t._e(),!t.isMobile||t.$store.state.mobilePropertiesExtended?a("div",{staticClass:"properties-group",attrs:{id:"properties"}},[t.layerSelected?t._e():[a("h4",[t._v("Document")]),a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Fond")]),a("b-input",{attrs:{type:"text",maxlength:"7"},model:{value:t.board.backgroundColor,callback:function(e){t.$set(t.board,"backgroundColor",e)},expression:"board.backgroundColor"}}),a("b-input",{staticClass:"ml-1",attrs:{type:"color"},model:{value:t.board.backgroundColor,callback:function(e){t.$set(t.board,"backgroundColor",e)},expression:"board.backgroundColor"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Rayon (cm)")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:t.board.radius,callback:function(e){t.$set(t.board,"radius",t._n(e))},expression:"board.radius"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Taille (cm)")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:t.board.width,callback:function(e){t.$set(t.board,"width",t._n(e))},expression:"board.width"}}),a("b-input-group-text",{staticClass:"mx-2"},[t._v("x")]),a("b-input",{attrs:{type:"number",min:"1",max:"150",step:"1"},model:{value:t.board.height,callback:function(e){t.$set(t.board,"height",t._n(e))},expression:"board.height"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Qualité")]),a("b-input",{attrs:{type:"number",min:"1",max:"50",step:"1"},model:{value:t.board.resolution,callback:function(e){t.$set(t.board,"resolution",t._n(e))},expression:"board.resolution"}})],1)],1)],1),a("hr"),a("h4",[t._v("Forme")]),a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Forme de base")]),a("b-select",{model:{value:t.board.shape,callback:function(e){t.$set(t.board,"shape",e)},expression:"board.shape"}},[a("option",{attrs:{value:"circle"}},[t._v("Cercle")])])],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Clous")]),a("b-select",{model:{value:t.board.nails,callback:function(e){t.$set(t.board,"nails",t._n(e))},expression:"board.nails"}},t._l(999,(function(e){return a("option",{key:"nail-"+e,domProps:{value:e+1}},[t._v(t._s(e+1))])})),0)],1)],1)],1)],t.layerSelected?a("div",{staticClass:"content"},[a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Nom")]),a("b-input",{attrs:{type:"text"},model:{value:t.layerSelected.name,callback:function(e){t.$set(t.layerSelected,"name",e)},expression:"layerSelected.name"}})],1)],1),a("b-form-group",{staticClass:"property"},[a("b-input-group",[a("b-input-group-text",[t._v("Couleur")]),a("b-input",{attrs:{type:"text",maxlength:"7"},model:{value:t.layerSelected.color,callback:function(e){t.$set(t.layerSelected,"color",e)},expression:"layerSelected.color"}}),a("b-input",{staticClass:"ml-1",attrs:{type:"color"},model:{value:t.layerSelected.color,callback:function(e){t.$set(t.layerSelected,"color",e)},expression:"layerSelected.color"}})],1)],1)],1):t._e()],2):t._e(),a("div",{staticClass:"properties-group",attrs:{id:"layers"}},[a("h4",[t._v("Calques")]),a("div",{staticClass:"content"},[a("div",{staticClass:"layer",class:{active:null===t.layerSelected},on:{click:function(e){t.layerSelected=null}}},[a("div",{staticClass:"visibility"}),a("div",{staticClass:"name"},[t._v(" Board ")])]),a("draggable",{attrs:{"ghost-class":"list-item-ghost","drag-class":"list-item-drag",animation:"150"},model:{value:t.layers,callback:function(e){t.layers=e},expression:"layers"}},t._l(t.layers,(function(e){return a("div",{key:e.id,staticClass:"layer",class:{active:t.layerSelected===e},on:{click:function(a){t.layerSelected=e}}},[a("div",{staticClass:"visibility",on:{click:function(t){t.stopPropagation(),e.visible=!e.visible}}},[e.visible?a("i",{staticClass:"far fa-eye fa-fw"}):a("i",{staticClass:"far fa-eye-slash fa-fw"})]),a("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),a("div",{staticClass:"color"},[a("i",{style:{color:e.color}},[t._v("⬤")])])])})),0)],1),a("div",{staticClass:"actions"},[a("b-btn",{on:{click:t.addLayer}},[a("i",{staticClass:"far fa-plus-square"})]),a("b-btn",{staticClass:"ml-auto",attrs:{disabled:null===t.layerSelected},on:{click:t.removeLayer}},[a("i",{staticClass:"far fa-trash"})])],1)])],1)},y=[],x={name:"properties-panel",data:function(){return{menuExtended:!1}},computed:{layerSelected:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},props:{value:{}},methods:{addLayer:function(){var t=this.project.addLayer();this.layerSelected=t},removeLayer:function(){if(!this.layerSelected)return!1;this.project.removeLayer(this.layerSelected),this.layerSelected=null}}},w=x,k=(a("f1fe"),Object(f["a"])(w,g,y,!1,null,"252cb9ae",null)),_=k.exports,C=(a("c975"),a("a434"),a("b0c0"),a("ade3")),j=function(){function t(){Object(u["a"])(this,t)}return Object(d["a"])(t,null,[{key:"getDefaultColor",value:function(t){return this.defaultPalette[t%this.defaultPalette.length]}}]),t}();Object(C["a"])(j,"defaultPalette",["#051f24","#1d758a","#036074","#5b93a3","#3587a3","#3aa1aa","#93cccc","#8eb1af","#88babf"]);a("25f0");function S(){return"$"+("0000000"+(Math.random()*Math.pow(36,7)<<0).toString(36)).substr(-7)}var $=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Nouveau projet";Object(u["a"])(this,t),this.id="default",this.name=e,this.board={backgroundColor:"#ffffff",width:55.88,height:55.88,nails:320,radius:25,resolution:25,shape:"circle"},window.innerWidth<576&&(this.board.resolution=10),this.layers=[]}return Object(d["a"])(t,[{key:"addLayer",value:function(){var t={index:this.layers.length,id:S(),name:"Fil ".concat(this.layers.length+1),color:j.getDefaultColor(this.layers.length),visible:!0};return this.layers.push(t),t}},{key:"removeLayer",value:function(t){this.layers.splice(this.layers.indexOf(t),1)}},{key:"save",value:function(){var t={name:this.name,board:this.board,layers:this.layers};localStorage.setItem("project-"+this.id,JSON.stringify(t))}},{key:"open",value:function(){var t=localStorage.getItem("project-default");t&&(t=JSON.parse(t),this.name=t.name,this.board=t.board,this.layers=t.layers)}}]),t}(),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-page"},[t._t("default")],2)},M=[],O={name:"main-page"},L=O,N=Object(f["a"])(L,P,M,!1,null,"17114284",null),E=N.exports,T={name:"home",components:{PropertiesPanel:_,Board:m,MainPage:E},data:function(){return{zoom:1,showPreviousSessionModal:!1,previousProjectName:"",layerSelected:!1,menuExtended:!1}},mounted:function(){this.newProject(),this.project.open()},methods:{newProject:function(){this.project=new $;for(var t=0;t<9;t++)this.project.addLayer()},setZoom:function(t){this.zoom=Math.max(Math.min(this.zoom+t,3),.1)}}},z=T,A=(a("c904"),Object(f["a"])(z,o,i,!1,null,"0f779b9c",null)),q=A.exports,R={name:"App",components:{home:q}},X=R,Y=(a("5c0b"),Object(f["a"])(X,s,r,!1,null,null,null)),F=Y.exports,I=a("2f62");n["default"].use(I["a"]);var J=new I["a"].Store({state:{project:null,settings:{middleLines:!1,diagonalLines:!1,nailNumbers:!1},mobilePropertiesExtended:!1},getters:{},mutations:{setProject:function(t,e){t.project=e},setSettings:function(t,e){t.settings=e}},actions:{}}),W=a("5f5b");a("f82b"),a("e11e"),a("9a4a");n["default"].mixin({computed:{project:{get:function(){return this.$store.state.project},set:function(t){this.$store.commit("setProject",t)}},settings:{get:function(){return this.$store.state.settings},set:function(t){this.$store.commit("setSettings",t)}},board:{get:function(){return this.$store.state.project?this.$store.state.project.board:null},set:function(t){this.$store.state.project.board=t}},layers:{get:function(){return this.$store.state.project?this.$store.state.project.layers:null},set:function(t){this.$store.state.project.layers=t}},isMobile:function(){return window.innerWidth<576}}});var B=a("b76a"),D=a.n(B);n["default"].config.productionTip=!1,n["default"].use(W["a"]),n["default"].component("draggable",D.a),new n["default"]({store:J,render:function(t){return t(F)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),s=a.n(n);s.a},"9c0c":function(t,e,a){},a320:function(t,e,a){},b423:function(t,e,a){},b462:function(t,e,a){},c904:function(t,e,a){"use strict";var n=a("b462"),s=a.n(n);s.a},f1fe:function(t,e,a){"use strict";var n=a("a320"),s=a.n(n);s.a}});
//# sourceMappingURL=app.83d572fc.js.map